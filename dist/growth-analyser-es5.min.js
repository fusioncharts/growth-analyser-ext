!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(1);FusionCharts.register("extension",["private","growth-analyser-ext",function(){function t(){this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,window.a=this}t.prototype.constructor=t,t.prototype.renderChange=function(){var t=this.tsObject.chartInstance,e=t.apiInstance.getComponentStore(),n=0;for(n=0;e.getCanvasByIndex(n);++n)e.getCanvasByIndex(n).getComposition().PlotManager.plot()},t.prototype.analyser=function(t){var e,n=this.ga||{},r=this.tsObject.apiInstance.getComponentStore(),o=r.getCanvasByIndex(0),a=(r.getNavigatorByIndex(0),o.getComposition()),s=n.ds||a.dataset,l=n.idMap||{},h=n.storeAr||[],c=[],u=o.composition.yAxis;if("reset"===t?u.getScaleObj().getIntervalObj().getConfig("intervals").major.formatter=function(t){return t}:u.getScaleObj().getIntervalObj().getConfig("intervals").major.formatter=function(t){return t+"%"},this.ga=n,!n.storeAr&&(r={},!n.idMap)){s.forEachSeries(function(t,e,n,i){r[i.getId()]=i.getOriginalData()});for(e in r)h.push(r[e]),l[e]=h.length-1;n.idMap=l,n.ds=s,n.storeAr=h,n.gAnalyser=new i(h)}c=n.gAnalyser.analyse(t),s.setDataBySeries(function(t){c.length&&t.setOriginalData(c[l[t.getId()]])}),a.impl.update()},t.prototype.init=function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","chartInstance","canvasData",function(t,n,i,r,o,a,s,l,h,c,u,p,d,f){e.xAxis=t,e.yAxis=n,e.graphics=i,e.chart=r,e.dataset=o,e.plotManager=a,e.markerManager=l,e.canvasConfig=s,e.reactiveModel=h,e.globalReactiveModel=c,e.spaceManagerInstance=u,e.smartLabel=p,e.chartInstance=d,e.canvasData=f}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.tsObject=e.chartInstance,this.startDt=e.globalReactiveModel.model["x-axis-visible-range-start"],this.endDt=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this},t.prototype.createToolbar=function(){var t,e,n,i,r=this,o=[],a={},s=this.graphics.paper,l=this.graphics.container,h={"font-size":"12px",color:"#696969","font-family":'"Lucida Grande", Sans-serif'},c={"font-size":"13px",color:"#696969","font-family":'"Lucida Grande", Sans-serif',fontWeight:"bold"};t=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),e=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),a={"First Index":{position:0},"Previous Index":{relposition:-1},"Specific Value":{submenu:!0,Minimum:"Minimum",Maximum:"Maximum",Mean:"Mean",Median:"Median","Standard Deviation":"Standard Deviation","Custom Value...":function(){i(function(t){return r.analyser(t)})}}},n=new this.toolbox.SymbolWithContext("ContextIcon",{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{width:24,height:24,position:"right",stroke:"#f1f1f1",strokeWidth:"1",radius:"1",symbolStroke:"#bdbdbd",symbolStrokeWidth:"2"}),o.push({"Growth Analyser":{style:c}}),i=function(t){function e(){h.element.value=h.element.value.replace(/[^\d.-]/g,"")}var n,i,o,a,h,c,u={fontSize:"10px",lineHeight:"15px","font-family":'"Lucida Grande", Sans-serif',stroke:"#676767","stroke-width":"2"},p=180,d=.47*r.chart.width-90,f=r.chart.height/2-40;n=s.html("div",{fill:"#f7f7f7",x:d,y:f,width:180,height:80},u,l),i=s.html("div",{fill:"#e8e8e8",width:p,height:20},u,n),o=s.html("div",{fill:"transparent",width:.6*p,height:20,x:10,y:2},u,i),o.attr({text:"Provide value"}),a=s.html("div",{fill:"transparent",width:10,height:10,position:"relative",float:"right",text:"X",cursor:"pointer"},u,i),a.on("click",function(){n.hide()}),h=s.html("input",{width:100,height:20,x:10,y:30},u,n),c=s.html("div",{width:50,height:20,x:120,y:30,fill:"#555555"},{fontSize:"10px",lineHeight:"15px","font-family":'"Lucida Grande", Sans-serif',fill:"#eaeaea",color:"#eaeaea",stroke:"#eaeaea",cursor:"pointer"},n),c.on("click",function(){n.hide(),t(h.val())}),c.attr({text:"Apply"}),h.element.focus(),h.element.addEventListener("keyup",e),a.element.style.position="relative",a.element.style.backgroundColor="#d2d2d2",a.element.style.border="2px solid #cbcbcb",a.element.style.padding="0px 0px 3.5px 2px",a.element.style.color="#8c8c8c",a.element.style.margin="1px 2px",a.element.style.float="right",h.element.style.marginTop="8px",h.element.style.border="2px solid #dadbda",c.element.style.marginTop="8px",n.element.style.border="1px solid #d4d2d3",i.element.style.border="1px solid #d4d2d3",i.element.style.width="179px",o.element.style.fontSize="11.5px",o.element.style.marginTop="0.5px",o.element.style.color="#676767",i.element.style["font-family"]='"Lucida Grande", Sans-serif',c.element.style.textAlign="center",c.element.style.fontSize="11px",c.element.style.paddingTop="3px",c.element.style.borderRadius="3px",c.element.style.color="#e4e4e4"};var u=function(t){var e=void 0,n={},i={};if(a[t].submenu){e="&#9666&nbsp; "+t,n[e]={},n[e].action="click",n[e].style=h,n[e].handler=[];var s=function(o){var s=o,l=a[t][o];return"submenu"===o?"continue":(i={},i["&nbsp;"+s]={},i["&nbsp;"+s].handler=function(){"function"==typeof l?l():r.analyser(l)},i["&nbsp;"+s].action="click",i["&nbsp;"+s].style=h,n[e].handler.push(i),void(o!==a[t].length-1&&n[e].handler.push({"":{style:{backgroundColor:"#d5d2d2",height:"1px",margin:"1px",padding:"0px"}}})))};for(var l in a[t]){s(l)}}else e="&nbsp; &nbsp; "+t,n[e]={},n[e]={style:h,handler:function(){r.analyser(a[t])},action:"click"};o.push(n),o.push({"":{style:{backgroundColor:"#d5d2d2",height:"1px",margin:"1px",padding:"0px"}}})};for(var p in a)u(p);return o.push({"&nbsp; &nbsp; Reset View":{handler:function(){r.analyser("reset")},action:"click",style:h}}),n.appendAsList(o),this.SymbolStore.register("ContextIcon",function(t,e,n){var i=t,r=e,o=2*n,a=Math.round(o/4),s=.7*Math.round(o/2),l=i-s,h=i+s,c=r+a,u=r-a;return["M",l,r,"L",h,r,"M",l,c,"L",h,c,"M",l,u,"L",h,u]}),e.addSymbol(n),t.addComponent(e),t},t.prototype.getLogicalSpace=function(t,e){t/=2;var n,i,r,o=0,a=0;for(i=0,r=this.toolbars.length;i<r;i++)n=this.toolbars[i].getLogicalSpace(t,e),o=Math.max(n.width,o),a+=n.height,this.toolbars[i].width=n.width,this.toolbars[i].height=n.height;return a+=this.padding,{width:o>t?0:o,height:a>e?0:a}},t.prototype.placeInCanvas=function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"ToolBoxExt"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.right},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])},t.prototype.setDrawingConfiguration=function(t,e,n,i,r){var o=this.measurement;return o.x=t,o.y=e,o.width=n,o.height=i,this.parentGroup=r,this},t.prototype.draw=function(t,e,n,i,r){var o,a,s,l=this.measurement,h=this.toolbars;if(t=void 0===t?l.x:t,e=void 0===e?l.y:e,n=void 0===n?l.width:n,i=void 0===i?l.height:i,r=void 0===r?this.parentGroup:r,n&&i)for(a=0,o=h.length;a<o;a++)s=h[a],s.draw(t,e)},FusionCharts.registerComponent("extensions","GrowthAnalyserExt",t)}])},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.data=e.map(function(t){return t.map(function(t){return t})}),this.Formulae=o}return i(t,[{key:"analyse",value:function(t){var e=0,n=0,i=0,r=0,o=0,a=[],s=0,l=this.data,h=[],c=[],u=0;Math.floor,Math.round;if("string"==typeof t&&"reset"===t.toLowerCase())return l.map(function(t){return t.map(function(t){return t})});if(isNaN(t))if("string"==typeof t)for(t=this.Formulae[t],e=0,n=l.length;e<n;++e){for(c=[],s=t(l[e]),i=0,r=l[e].length;i<r;++i)o=l[e][i],u=0===s?void 0:100*(o-s)/s,c.push(u);h.push(c)}else if(isNaN(t.relposition))if(isNaN(t.position)&&"string"!=typeof t.position){if(!isNaN(t.reldatasetposition))for(t=t.reldatasetposition,e=0,n=l.length;e<n;++e){for(c=[],a=e+t>=0&&e+t<n?l[e+t]:l[e],i=0,r=l[e].length;i<r;++i)s=a[i],o=l[e][i],c.push(100*(o-s)/o);h.push(c)}}else for(t=t.position,e=0,n=l.length;e<n;++e){for(c=[],i=0,r=l[e].length;i<r;++i)o=l[e][i],s="last"===t?l[e][r-1]:"mid"===t?l[e][r/2]:t>=0&&t<r?l[e][t]:o,c.push(100*(o-s)/s);h.push(c)}else for(t=t.relposition,e=0,n=l.length;e<n;++e){for(c=[],i=0,r=l[e].length;i<r;++i)o=l[e][i],s=i+t>=0&&i+t<r?l[e][i+t]:o,c.push(100*(o-s)/s);h.push(c)}else for(s=+t,e=0,n=l.length;e<n;++e){for(c=[],i=0,r=l[e].length;i<r;++i)o=l[e][i],c.push(100*(o-s)/s);h.push(c)}for(e=0,n=h.length;e<n;++e)for(i=0,r=h[e].length;i<r;++i)Number.isFinite(h[e][i])||(h[e][i]=null);var p=function(t){return+(Math.round(t+"e+2")+"e-2")};for(e=0,n=h.length;e<n;++e)for(i=0,r=h[e].length;i<r;++i)h[e][i]=p(h[e][i]);return h}}]),t}(),o={Minimum:function(t){return t.reduce(function(t,e){return t>e?e:t})},Maximum:function(t){return t.reduce(function(t,e){return t<e?e:t})},Mean:function(t){return t.reduce(function(t,e){return t+e})/t.length},Median:function(t){return t.map(function(t){return t}).sort(function(t,e){return t-e})[t.length/2]},"Standard Deviation":function(t){function e(t){var e,n;return e=t.reduce(function(t,e){return t+e},0),n=e/t.length}var n=0,i=0,r=0,o=0,a=0,s=0;return n=e(t),i=t.map(function(t){return s=t-n,r=s*s}),o=e(i),a=Math.sqrt(o)}};t.exports=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZ3Jvd3RoLWFuYWx5c2VyLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDQ2MWUwZDJkMzEwOTFhMTI0Nzk4Iiwid2VicGFjazovLy8uL3NyYy9leHRlbnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyb3d0aGFuYWx5c2VyLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIkdyb3d0aEFuYWx5c2VyIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJHcm93dGhBbmFseXNlckV4dCIsInRoaXMiLCJ0b29sYm94IiwiZ2V0Q29tcG9uZW50IiwiSG9yaXpvbnRhbFRvb2xiYXIiLCJDb21wb25lbnRHcm91cCIsIlN5bWJvbFN0b3JlIiwid2luZG93IiwiYSIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwicmVuZGVyQ2hhbmdlIiwiY2hhcnRJbnN0YW5jZSIsInRzT2JqZWN0IiwiY29tcG9uZW50U3RvcmUiLCJhcGlJbnN0YW5jZSIsImdldENvbXBvbmVudFN0b3JlIiwiaSIsImdldENhbnZhc0J5SW5kZXgiLCJnZXRDb21wb3NpdGlvbiIsIlBsb3RNYW5hZ2VyIiwicGxvdCIsImFuYWx5c2VyIiwibW9kZSIsImdhIiwic3RvcmUiLCJjYW52YXMiLCJjb21wIiwiZ2V0TmF2aWdhdG9yQnlJbmRleCIsImRzIiwiZGF0YXNldCIsImlkTWFwIiwic3RvcmVBciIsIm5TdG9yZUFyciIsInlBeGlzIiwiY29tcG9zaXRpb24iLCJnZXRTY2FsZU9iaiIsImdldEludGVydmFsT2JqIiwiZ2V0Q29uZmlnIiwibWFqb3IiLCJmb3JtYXR0ZXIiLCJ2YWwiLCJmb3JFYWNoU2VyaWVzIiwiYiIsInNlcmllcyIsImdldElkIiwiZ2V0T3JpZ2luYWxEYXRhIiwicHVzaCIsImxlbmd0aCIsImdBbmFseXNlciIsImFuYWx5c2UiLCJzZXREYXRhQnlTZXJpZXMiLCJzZXRPcmlnaW5hbERhdGEiLCJpbXBsIiwidXBkYXRlIiwiaW5pdCIsInJlcXVpcmUiLCJpbnN0YW5jZSIsInhBeGlzIiwiZ3JhcGhpY3MiLCJjaGFydCIsInBsb3RNYW5hZ2VyIiwiY2FudmFzQ29uZmlnIiwibWFya2VyTWFuYWdlciIsInJlYWN0aXZlTW9kZWwiLCJnbG9iYWxSZWFjdGl2ZU1vZGVsIiwic3BhY2VNYW5hZ2VySW5zdGFuY2UiLCJzbWFydExhYmVsIiwiY2FudmFzRGF0YSIsInN0YXJ0RHQiLCJtb2RlbCIsImVuZER0Iiwic3RhcnREYXRhc2V0IiwiZW5kRGF0YXNldCIsInRvb2xiYXJzIiwibWVhc3VyZW1lbnQiLCJjcmVhdGVUb29sYmFyIiwidG9vbGJhciIsImdyb3VwIiwiY29udGV4dE1lbnUiLCJwb3B1cCIsInNlbGYiLCJjb250ZXh0QXJyYXkiLCJnYU9wdGlvbnNPYmoiLCJwYXBlciIsImNoYXJ0Q29udGFpbmVyIiwiY29udGFpbmVyIiwic3ViQ2F0U3R5bGUiLCJmb250LXNpemUiLCJjb2xvciIsImZvbnQtZmFtaWx5IiwiY2F0U3R5bGUiLCJmb250V2VpZ2h0Iiwic2V0Q29uZmlnIiwiZmlsbCIsImJvcmRlclRoaWNrbmVzcyIsIkZpcnN0IEluZGV4IiwicG9zaXRpb24iLCJQcmV2aW91cyBJbmRleCIsInJlbHBvc2l0aW9uIiwiU3BlY2lmaWMgVmFsdWUiLCJzdWJtZW51IiwiTWluaW11bSIsIk1heGltdW0iLCJNZWFuIiwiTWVkaWFuIiwiU3RhbmRhcmQgRGV2aWF0aW9uIiwiQ3VzdG9tIFZhbHVlLi4uIiwiU3ltYm9sV2l0aENvbnRleHQiLCJ3aWR0aCIsImhlaWdodCIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwicmFkaXVzIiwic3ltYm9sU3Ryb2tlIiwic3ltYm9sU3Ryb2tlV2lkdGgiLCJHcm93dGggQW5hbHlzZXIiLCJzdHlsZSIsImNhbGxiYWNrIiwiaW5wdXRGaWVsZE51bWJlckhhbmRsZXIiLCJpbnB1dEZpZWxkIiwiZWxlbWVudCIsInZhbHVlIiwicmVwbGFjZSIsImJveCIsImhlYWRlciIsImhlYWRlclRleHQiLCJjcm9zcyIsImFwcGx5QnV0dG9uIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0Iiwic3Ryb2tlLXdpZHRoIiwiaGVhZGVyV2lkdGgiLCJ4IiwieSIsImh0bWwiLCJhdHRyIiwidGV4dCIsImZsb2F0IiwiY3Vyc29yIiwib24iLCJoaWRlIiwiZm9jdXMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2xvb3AiLCJrZXkiLCJvYmoiLCJzdWJPYmoiLCJhY3Rpb24iLCJoYW5kbGVyIiwiX2xvb3AyIiwiaiIsInN1Yk1lbnVOYW1lIiwic3ViTWVudVZhbHVlIiwiIiwiYmFja2dyb3VuZENvbG9yIiwibWFyZ2luIiwicGFkZGluZyIsIiZuYnNwOyAmbmJzcDsgUmVzZXQgVmlldyIsImFwcGVuZEFzTGlzdCIsInBvc3giLCJwb3N5IiwicmFkIiwiciIsInNwYWNlIiwiTWF0aCIsInJvdW5kIiwiaGFsZldpZHRoIiwic3RhcnRYIiwiZW5kWCIsInN0YXJ0WSIsImVuZFkiLCJhZGRTeW1ib2wiLCJhZGRDb21wb25lbnQiLCJnZXRMb2dpY2FsU3BhY2UiLCJhdmFpbGFibGVXaWR0aCIsImF2YWlsYWJsZUhlaWdodCIsImxvZ2ljYWxTcGFjZSIsImxuIiwibWF4IiwicGxhY2VJbkNhbnZhcyIsImFkZCIsIm5hbWUiLCJyZWYiLCJwcmlvcml0eSIsImxheW91dCIsImlubGluZSIsIm9yaWVudGF0aW9uIiwidHlwZSIsImhvcml6b250YWwiLCJ0b3AiLCJhbGlnbm1lbnQiLCJyaWdodCIsImRpbWVuc2lvbnMiLCJwYXJlbnQiLCJnZXRQYXJlbnRDb21wb25lbnRHcm91cCIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0Iiwic2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24iLCJtZXMiLCJwYXJlbnRHcm91cCIsImRyYXciLCJ1bmRlZmluZWQiLCJyZWdpc3RlckNvbXBvbmVudCIsIl9jbGFzc0NhbGxDaGVjayIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiZGF0YSIsIm1hcCIsIkZvcm11bGFlIiwiaWkiLCJqaiIsIm51bSIsImNoZWNrQXJyIiwiY2hlY2tOdW0iLCJkYXRhQXIiLCJuRGF0YUFyIiwidGVtcEFyIiwidGVtcCIsImZsb29yIiwidG9Mb3dlckNhc2UiLCJpc05hTiIsInJlbGRhdGFzZXRwb3NpdGlvbiIsIk51bWJlciIsImlzRmluaXRlIiwicm91bmRUb1R3byIsImFyciIsInJlZHVjZSIsInNvcnQiLCJ2YWx1ZXMiLCJhdmVyYWdlIiwic3VtIiwiYXZnIiwic3F1YXJlRGlmZnMiLCJzcXJEaWZmIiwiYXZnU3F1YXJlRGlmZiIsInN0ZERldiIsImRpZmYiLCJzcXJ0Il0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxHQUUvQixZRTlDRCxJQUFNVyxHQUFpQlgsRUFBUSxFQUUvQlksY0FBYUMsU0FBUyxhQUFjLFVBQVcsc0JBQXVCLFdBQ3BFLFFBQVND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SUFHbkJGLEVBQWdCTCxFQUFRRyxHQUN4QkcsRUFBU25GLEtBQUtxRixLQUFLSCxJQUt2QmpRLEdBQU9ELFFBQVVRIiwiZmlsZSI6Imdyb3d0aC1hbmFseXNlci1lczUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgR3Jvd3RoQW5hbHlzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0RnVzaW9uQ2hhcnRzLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3ByaXZhdGUnLCAnZ3Jvd3RoLWFuYWx5c2VyLWV4dCcsIGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBHcm93dGhBbmFseXNlckV4dCgpIHtcblx0ICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG5cdCAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuXHQgICAgdGhpcy5Db21wb25lbnRHcm91cCA9IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cDtcblx0ICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG5cdCAgICB3aW5kb3cuYSA9IHRoaXM7XG5cdCAgfVxuXHQgIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdyb3d0aEFuYWx5c2VyRXh0O1xuXHRcblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUucmVuZGVyQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGNoYXJ0SW5zdGFuY2UgPSB0aGlzLnRzT2JqZWN0LmNoYXJ0SW5zdGFuY2UsXG5cdCAgICAgICAgY29tcG9uZW50U3RvcmUgPSBjaGFydEluc3RhbmNlLmFwaUluc3RhbmNlLmdldENvbXBvbmVudFN0b3JlKCksXG5cdCAgICAgICAgaSA9IDA7XG5cdCAgICBmb3IgKGkgPSAwOyBjb21wb25lbnRTdG9yZS5nZXRDYW52YXNCeUluZGV4KGkpOyArK2kpIHtcblx0ICAgICAgY29tcG9uZW50U3RvcmUuZ2V0Q2FudmFzQnlJbmRleChpKS5nZXRDb21wb3NpdGlvbigpLlBsb3RNYW5hZ2VyLnBsb3QoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuYW5hbHlzZXIgPSBmdW5jdGlvbiAobW9kZSkge1xuXHQgICAgdmFyIGdhID0gdGhpcy5nYSB8fCB7fSxcblx0ICAgICAgICBzdG9yZSA9IHRoaXMudHNPYmplY3QuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcblx0ICAgICAgICBjYW52YXMgPSBzdG9yZS5nZXRDYW52YXNCeUluZGV4KDApLFxuXHQgICAgICAgIG5hdiA9IHN0b3JlLmdldE5hdmlnYXRvckJ5SW5kZXgoMCksXG5cdCAgICAgICAgY29tcCA9IGNhbnZhcy5nZXRDb21wb3NpdGlvbigpLFxuXHQgICAgICAgIGRzID0gZ2EuZHMgfHwgY29tcC5kYXRhc2V0LFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgaWRNYXAgPSBnYS5pZE1hcCB8fCB7fSxcblx0ICAgICAgICBzdG9yZUFyID0gZ2Euc3RvcmVBciB8fCBbXSxcblx0ICAgICAgICBuU3RvcmVBcnIgPSBbXSxcblx0ICAgICAgICB5QXhpcyA9IGNhbnZhcy5jb21wb3NpdGlvbi55QXhpcztcblx0ICAgIC8vIENoYW5naW5nIHkgQXhpcyBmb3JtYXR0b3Jcblx0ICAgIGlmIChtb2RlID09PSAncmVzZXQnKSB7XG5cdCAgICAgIHlBeGlzLmdldFNjYWxlT2JqKCkuZ2V0SW50ZXJ2YWxPYmooKS5nZXRDb25maWcoJ2ludGVydmFscycpLm1ham9yLmZvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgeUF4aXMuZ2V0U2NhbGVPYmooKS5nZXRJbnRlcnZhbE9iaigpLmdldENvbmZpZygnaW50ZXJ2YWxzJykubWFqb3IuZm9ybWF0dGVyID0gZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgIHJldHVybiB2YWwgKyAnJSc7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgICAvLyBEZWNsYXJhdGlvbiBlbmRzXG5cdCAgICB0aGlzLmdhID0gZ2E7XG5cdCAgICBpZiAoIWdhLnN0b3JlQXIpIHtcblx0ICAgICAgc3RvcmUgPSB7fTtcblx0ICAgICAgaWYgKCFnYS5pZE1hcCkge1xuXHQgICAgICAgIGRzLmZvckVhY2hTZXJpZXMoZnVuY3Rpb24gKGEsIGIsIGMsIHNlcmllcykge1xuXHQgICAgICAgICAgc3RvcmVbc2VyaWVzLmdldElkKCldID0gc2VyaWVzLmdldE9yaWdpbmFsRGF0YSgpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGZvciAoaSBpbiBzdG9yZSkge1xuXHQgICAgICAgICAgc3RvcmVBci5wdXNoKHN0b3JlW2ldKTtcblx0ICAgICAgICAgIGlkTWFwW2ldID0gc3RvcmVBci5sZW5ndGggLSAxO1xuXHQgICAgICAgICAgLy8gPSBzdG9yZVtpXS5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIDIwICogZSArIChNYXRoLnJhbmRvbSgpICogMTAwMCk7IH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBnYS5pZE1hcCA9IGlkTWFwO1xuXHQgICAgICAgIGdhLmRzID0gZHM7XG5cdCAgICAgICAgZ2Euc3RvcmVBciA9IHN0b3JlQXI7XG5cdCAgICAgICAgZ2EuZ0FuYWx5c2VyID0gbmV3IEdyb3d0aEFuYWx5c2VyKHN0b3JlQXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBuU3RvcmVBcnIgPSBnYS5nQW5hbHlzZXIuYW5hbHlzZShtb2RlKTtcblx0ICAgIGRzLnNldERhdGFCeVNlcmllcyhmdW5jdGlvbiAoc2VyaWVzKSB7XG5cdCAgICAgIGlmIChuU3RvcmVBcnIubGVuZ3RoKSB7XG5cdCAgICAgICAgc2VyaWVzLnNldE9yaWdpbmFsRGF0YShuU3RvcmVBcnJbaWRNYXBbc2VyaWVzLmdldElkKCldXSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgY29tcC5pbXBsLnVwZGF0ZSgpO1xuXHQgIH07XG5cdFxuXHQgIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHJlcXVpcmUpIHtcblx0ICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG5cdCAgICByZXF1aXJlKFsneEF4aXMnLCAneUF4aXMnLCAnZ3JhcGhpY3MnLCAnY2hhcnQnLCAnZGF0YXNldCcsICdQbG90TWFuYWdlcicsICdjYW52YXNDb25maWcnLCAnTWFya2VyTWFuYWdlcicsICdyZWFjdGl2ZU1vZGVsJywgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLCAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLCAnc21hcnRMYWJlbCcsICdjaGFydEluc3RhbmNlJywgJ2NhbnZhc0RhdGEnLCBmdW5jdGlvbiAoeEF4aXMsIHlBeGlzLCBncmFwaGljcywgY2hhcnQsIGRhdGFzZXQsIHBsb3RNYW5hZ2VyLCBjYW52YXNDb25maWcsIG1hcmtlck1hbmFnZXIsIHJlYWN0aXZlTW9kZWwsIGdsb2JhbFJlYWN0aXZlTW9kZWwsIHNwYWNlTWFuYWdlckluc3RhbmNlLCBzbWFydExhYmVsLCBjaGFydEluc3RhbmNlLCBjYW52YXNEYXRhKSB7XG5cdCAgICAgIGluc3RhbmNlLnhBeGlzID0geEF4aXM7XG5cdCAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG5cdCAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG5cdCAgICAgIGluc3RhbmNlLmNoYXJ0ID0gY2hhcnQ7XG5cdCAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuXHQgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuXHQgICAgICBpbnN0YW5jZS5tYXJrZXJNYW5hZ2VyID0gbWFya2VyTWFuYWdlcjtcblx0ICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuXHQgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcblx0ICAgICAgaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGdsb2JhbFJlYWN0aXZlTW9kZWw7XG5cdCAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuXHQgICAgICBpbnN0YW5jZS5jaGFydEluc3RhbmNlID0gY2hhcnRJbnN0YW5jZTtcblx0ICAgICAgaW5zdGFuY2UuY2FudmFzRGF0YSA9IGNhbnZhc0RhdGE7XG5cdCAgICB9XSk7XG5cdCAgICB0aGlzLnNwYWNlTWFuYWdlckluc3RhbmNlID0gaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgdGhpcy50c09iamVjdCA9IGluc3RhbmNlLmNoYXJ0SW5zdGFuY2U7XG5cdCAgICB0aGlzLnN0YXJ0RHQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddO1xuXHQgICAgdGhpcy5lbmREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuXHQgICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgIHRoaXMuZW5kRGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXTtcblx0ICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcblx0ICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcblx0ICAgIHRoaXMudG9vbGJhcnMucHVzaCh0aGlzLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuY3JlYXRlVG9vbGJhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciB0b29sYmFyLFxuXHQgICAgICAgIGdyb3VwLFxuXHQgICAgICAgIHNlbGYgPSB0aGlzLFxuXHQgICAgICAgIGNvbnRleHRNZW51LFxuXHQgICAgICAgIGNvbnRleHRBcnJheSA9IFtdLFxuXHQgICAgICAgIGdhT3B0aW9uc09iaiA9IHt9LFxuXHQgICAgICAgIHBvcHVwLFxuXHQgICAgICAgIHBhcGVyID0gdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICBjaGFydENvbnRhaW5lciA9IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyLFxuXHQgICAgICAgIHN1YkNhdFN0eWxlID0ge1xuXHQgICAgICAnZm9udC1zaXplJzogJzEycHgnLFxuXHQgICAgICAnY29sb3InOiAnIzY5Njk2OScsXG5cdCAgICAgICdmb250LWZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgU2Fucy1zZXJpZidcblx0ICAgIH0sXG5cdCAgICAgICAgY2F0U3R5bGUgPSB7XG5cdCAgICAgICdmb250LXNpemUnOiAnMTNweCcsXG5cdCAgICAgICdjb2xvcic6ICcjNjk2OTY5Jyxcblx0ICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBTYW5zLXNlcmlmJyxcblx0ICAgICAgJ2ZvbnRXZWlnaHQnOiAnYm9sZCdcblx0ICAgIH07XG5cdFxuXHQgICAgdG9vbGJhciA9IG5ldyB0aGlzLkhvcml6b250YWxUb29sYmFyKHtcblx0ICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgfSk7XG5cdFxuXHQgICAgdG9vbGJhci5zZXRDb25maWcoe1xuXHQgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgfSk7XG5cdFxuXHQgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgfSk7XG5cdFxuXHQgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICBib3JkZXJUaGlja25lc3M6IDBcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdhT3B0aW9uc09iaiA9IHtcblx0ICAgICAgJ0ZpcnN0IEluZGV4JzogeyBwb3NpdGlvbjogMCB9LFxuXHQgICAgICAnUHJldmlvdXMgSW5kZXgnOiB7IHJlbHBvc2l0aW9uOiAtMSB9LFxuXHQgICAgICAnU3BlY2lmaWMgVmFsdWUnOiB7XG5cdCAgICAgICAgJ3N1Ym1lbnUnOiB0cnVlLFxuXHQgICAgICAgICdNaW5pbXVtJzogJ01pbmltdW0nLFxuXHQgICAgICAgICdNYXhpbXVtJzogJ01heGltdW0nLFxuXHQgICAgICAgICdNZWFuJzogJ01lYW4nLFxuXHQgICAgICAgICdNZWRpYW4nOiAnTWVkaWFuJyxcblx0ICAgICAgICAnU3RhbmRhcmQgRGV2aWF0aW9uJzogJ1N0YW5kYXJkIERldmlhdGlvbicsXG5cdCAgICAgICAgJ0N1c3RvbSBWYWx1ZS4uLic6IGZ1bmN0aW9uIEN1c3RvbVZhbHVlKCkge1xuXHQgICAgICAgICAgcG9wdXAoZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgICAgICByZXR1cm4gc2VsZi5hbmFseXNlcih2YWwpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGNvbnRleHRNZW51ID0gbmV3IHRoaXMudG9vbGJveC5TeW1ib2xXaXRoQ29udGV4dCgnQ29udGV4dEljb24nLCB7XG5cdCAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgIH0sIHtcblx0ICAgICAgd2lkdGg6IDI0LFxuXHQgICAgICBoZWlnaHQ6IDI0LFxuXHQgICAgICBwb3NpdGlvbjogJ3JpZ2h0Jyxcblx0ICAgICAgc3Ryb2tlOiAnI2YxZjFmMScsXG5cdCAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG5cdCAgICAgIHJhZGl1czogJzEnLFxuXHQgICAgICBzeW1ib2xTdHJva2U6ICcjYmRiZGJkJyxcblx0ICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJ1xuXHQgICAgfSk7XG5cdFxuXHQgICAgY29udGV4dEFycmF5LnB1c2goe1xuXHQgICAgICAnR3Jvd3RoIEFuYWx5c2VyJzoge1xuXHQgICAgICAgIHN0eWxlOiBjYXRTdHlsZVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHBvcHVwID0gZnVuY3Rpb24gcG9wdXAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGJveCxcblx0ICAgICAgICAgIGhlYWRlcixcblx0ICAgICAgICAgIHN0eWxlID0ge1xuXHQgICAgICAgIGZvbnRTaXplOiAxMCArICdweCcsXG5cdCAgICAgICAgbGluZUhlaWdodDogMTUgKyAncHgnLFxuXHQgICAgICAgICdmb250LWZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgU2Fucy1zZXJpZicsXG5cdCAgICAgICAgc3Ryb2tlOiAnIzY3Njc2NycsXG5cdCAgICAgICAgJ3N0cm9rZS13aWR0aCc6ICcyJ1xuXHQgICAgICB9LFxuXHQgICAgICAgICAgaGVhZGVyV2lkdGggPSAxODAsXG5cdCAgICAgICAgICBoZWFkZXJUZXh0LFxuXHQgICAgICAgICAgY3Jvc3MsXG5cdCAgICAgICAgICBpbnB1dEZpZWxkLFxuXHQgICAgICAgICAgYXBwbHlCdXR0b24sXG5cdCAgICAgICAgICB4ID0gc2VsZi5jaGFydC53aWR0aCAqIDAuNDcgLSA5MCxcblx0ICAgICAgICAgIHkgPSBzZWxmLmNoYXJ0LmhlaWdodCAvIDIgLSA0MDtcblx0XG5cdCAgICAgIGJveCA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcblx0ICAgICAgICBmaWxsOiAnI2Y3ZjdmNycsXG5cdCAgICAgICAgeDogeCxcblx0ICAgICAgICB5OiB5LFxuXHQgICAgICAgIHdpZHRoOiAxODAsXG5cdCAgICAgICAgaGVpZ2h0OiA4MFxuXHQgICAgICB9LCBzdHlsZSwgY2hhcnRDb250YWluZXIpO1xuXHRcblx0ICAgICAgaGVhZGVyID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuXHQgICAgICAgIGZpbGw6ICcjZThlOGU4Jyxcblx0ICAgICAgICB3aWR0aDogaGVhZGVyV2lkdGgsXG5cdCAgICAgICAgaGVpZ2h0OiAyMFxuXHQgICAgICB9LCBzdHlsZSwgYm94KTtcblx0XG5cdCAgICAgIGhlYWRlclRleHQgPSBwYXBlci5odG1sKCdkaXYnLCB7XG5cdCAgICAgICAgZmlsbDogJ3RyYW5zcGFyZW50Jyxcblx0ICAgICAgICB3aWR0aDogaGVhZGVyV2lkdGggKiAwLjYsXG5cdCAgICAgICAgaGVpZ2h0OiAyMCxcblx0ICAgICAgICB4OiAxMCxcblx0ICAgICAgICB5OiAyXG5cdCAgICAgIH0sIHN0eWxlLCBoZWFkZXIpO1xuXHRcblx0ICAgICAgaGVhZGVyVGV4dC5hdHRyKHtcblx0ICAgICAgICB0ZXh0OiAnUHJvdmlkZSB2YWx1ZSdcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBjcm9zcyA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcblx0ICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxuXHQgICAgICAgIHdpZHRoOiAxMCxcblx0ICAgICAgICBoZWlnaHQ6IDEwLFxuXHQgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHQgICAgICAgIGZsb2F0OiAncmlnaHQnLFxuXHQgICAgICAgIHRleHQ6ICdYJyxcblx0ICAgICAgICBjdXJzb3I6ICdwb2ludGVyJ1xuXHQgICAgICB9LCBzdHlsZSwgaGVhZGVyKTtcblx0XG5cdCAgICAgIGNyb3NzLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBib3guaGlkZSgpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlucHV0RmllbGQgPSBwYXBlci5odG1sKCdpbnB1dCcsIHtcblx0ICAgICAgICB3aWR0aDogMTAwLFxuXHQgICAgICAgIGhlaWdodDogMjAsXG5cdCAgICAgICAgeDogMTAsXG5cdCAgICAgICAgeTogMzBcblx0ICAgICAgfSwgc3R5bGUsIGJveCk7XG5cdFxuXHQgICAgICBhcHBseUJ1dHRvbiA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcblx0ICAgICAgICB3aWR0aDogNTAsXG5cdCAgICAgICAgaGVpZ2h0OiAyMCxcblx0ICAgICAgICB4OiAxMjAsXG5cdCAgICAgICAgeTogMzAsXG5cdCAgICAgICAgZmlsbDogJyM1NTU1NTUnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBmb250U2l6ZTogMTAgKyAncHgnLFxuXHQgICAgICAgIGxpbmVIZWlnaHQ6IDE1ICsgJ3B4Jyxcblx0ICAgICAgICAnZm9udC1mYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIFNhbnMtc2VyaWYnLFxuXHQgICAgICAgIGZpbGw6ICcjZWFlYWVhJyxcblx0ICAgICAgICBjb2xvcjogJyNlYWVhZWEnLFxuXHQgICAgICAgIHN0cm9rZTogJyNlYWVhZWEnLFxuXHQgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG5cdCAgICAgIH0sIGJveCk7XG5cdFxuXHQgICAgICBhcHBseUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgYm94LmhpZGUoKTtcblx0ICAgICAgICBjYWxsYmFjayhpbnB1dEZpZWxkLnZhbCgpKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGFwcGx5QnV0dG9uLmF0dHIoe1xuXHQgICAgICAgIHRleHQ6ICdBcHBseSdcblx0ICAgICAgfSk7XG5cdCAgICAgIGlucHV0RmllbGQuZWxlbWVudC5mb2N1cygpO1xuXHQgICAgICBmdW5jdGlvbiBpbnB1dEZpZWxkTnVtYmVySGFuZGxlcigpIHtcblx0ICAgICAgICBpbnB1dEZpZWxkLmVsZW1lbnQudmFsdWUgPSBpbnB1dEZpZWxkLmVsZW1lbnQudmFsdWUucmVwbGFjZSgvW15cXGQuLV0vZywgJycpO1xuXHQgICAgICB9XG5cdCAgICAgIGlucHV0RmllbGQuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGlucHV0RmllbGROdW1iZXJIYW5kbGVyKTtcblx0ICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsncG9zaXRpb24nXSA9ICdyZWxhdGl2ZSc7XG5cdCAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2JhY2tncm91bmRDb2xvciddID0gJyNkMmQyZDInO1xuXHQgICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcycHggc29saWQgI2NiY2JjYic7XG5cdCAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ3BhZGRpbmcnXSA9ICcwcHggMHB4IDMuNXB4IDJweCc7XG5cdCAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2NvbG9yJ10gPSAnIzhjOGM4Yyc7XG5cdCAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ21hcmdpbiddID0gJzFweCAycHgnO1xuXHQgICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydmbG9hdCddID0gJ3JpZ2h0Jztcblx0ICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LnN0eWxlWydtYXJnaW5Ub3AnXSA9ICc4cHgnO1xuXHQgICAgICBpbnB1dEZpZWxkLmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzJweCBzb2xpZCAjZGFkYmRhJztcblx0ICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnOHB4Jztcblx0ICAgICAgYm94LmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzFweCBzb2xpZCAjZDRkMmQzJztcblx0ICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzFweCBzb2xpZCAjZDRkMmQzJztcblx0ICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ3dpZHRoJ10gPSAnMTc5cHgnO1xuXHQgICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ2ZvbnRTaXplJ10gPSAnMTEuNXB4Jztcblx0ICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydtYXJnaW5Ub3AnXSA9ICcwLjVweCc7XG5cdCAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjNjc2NzY3Jztcblx0ICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ2ZvbnQtZmFtaWx5J10gPSAnXCJMdWNpZGEgR3JhbmRlXCIsIFNhbnMtc2VyaWYnO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWyd0ZXh0QWxpZ24nXSA9ICdjZW50ZXInO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydmb250U2l6ZSddID0gJzExcHgnO1xuXHQgICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydwYWRkaW5nVG9wJ10gPSAnM3B4Jztcblx0ICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnYm9yZGVyUmFkaXVzJ10gPSAnM3B4Jztcblx0ICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjZTRlNGU0Jztcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuXHQgICAgICB2YXIga2V5ID0gdm9pZCAwLFxuXHQgICAgICAgICAgb2JqID0ge30sXG5cdCAgICAgICAgICBzdWJPYmogPSB7fTtcblx0ICAgICAgaWYgKCFnYU9wdGlvbnNPYmpbaV0uc3VibWVudSkge1xuXHQgICAgICAgIGtleSA9ICcmbmJzcDsgJm5ic3A7ICcgKyBpO1xuXHQgICAgICAgIG9ialtrZXldID0ge307XG5cdCAgICAgICAgb2JqW2tleV0gPSB7XG5cdCAgICAgICAgICBzdHlsZTogc3ViQ2F0U3R5bGUsXG5cdCAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkge1xuXHQgICAgICAgICAgICBzZWxmLmFuYWx5c2VyKGdhT3B0aW9uc09ialtpXSk7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBrZXkgPSAnJiM5NjY2Jm5ic3A7ICcgKyBpO1xuXHQgICAgICAgIG9ialtrZXldID0ge307XG5cdCAgICAgICAgb2JqW2tleV0uYWN0aW9uID0gJ2NsaWNrJztcblx0ICAgICAgICBvYmpba2V5XS5zdHlsZSA9IHN1YkNhdFN0eWxlO1xuXHQgICAgICAgIG9ialtrZXldLmhhbmRsZXIgPSBbXTtcblx0XG5cdCAgICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihqKSB7XG5cdCAgICAgICAgICB2YXIgc3ViTWVudU5hbWUgPSBqLFxuXHQgICAgICAgICAgICAgIHN1Yk1lbnVWYWx1ZSA9IGdhT3B0aW9uc09ialtpXVtqXTtcblx0ICAgICAgICAgIGlmIChqID09PSAnc3VibWVudScpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICdjb250aW51ZSc7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBzdWJPYmogPSB7fTtcblx0ICAgICAgICAgIHN1Yk9ialsnJm5ic3A7JyArIHN1Yk1lbnVOYW1lXSA9IHt9O1xuXHQgICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLmhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2Ygc3ViTWVudVZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgICAgc3ViTWVudVZhbHVlKCk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcihzdWJNZW51VmFsdWUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLmFjdGlvbiA9ICdjbGljayc7XG5cdCAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uc3R5bGUgPSBzdWJDYXRTdHlsZTtcblx0ICAgICAgICAgIG9ialtrZXldLmhhbmRsZXIucHVzaChzdWJPYmopO1xuXHQgICAgICAgICAgaWYgKGogIT09IGdhT3B0aW9uc09ialtpXS5sZW5ndGggLSAxKSB7XG5cdCAgICAgICAgICAgIG9ialtrZXldLmhhbmRsZXIucHVzaCh7XG5cdCAgICAgICAgICAgICAgJyc6IHtcblx0ICAgICAgICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkNWQyZDInLFxuXHQgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxcHgnLFxuXHQgICAgICAgICAgICAgICAgICBtYXJnaW46ICcxcHgnLFxuXHQgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMHB4J1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgaiBpbiBnYU9wdGlvbnNPYmpbaV0pIHtcblx0ICAgICAgICAgIHZhciBfcmV0MiA9IF9sb29wMihqKTtcblx0XG5cdCAgICAgICAgICBpZiAoX3JldDIgPT09ICdjb250aW51ZScpIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBjb250ZXh0QXJyYXkucHVzaChvYmopO1xuXHQgICAgICBjb250ZXh0QXJyYXkucHVzaCh7XG5cdCAgICAgICAgJyc6IHtcblx0ICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkNWQyZDInLFxuXHQgICAgICAgICAgICBoZWlnaHQ6ICcxcHgnLFxuXHQgICAgICAgICAgICBtYXJnaW46ICcxcHgnLFxuXHQgICAgICAgICAgICBwYWRkaW5nOiAnMHB4J1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZvciAodmFyIGkgaW4gZ2FPcHRpb25zT2JqKSB7XG5cdCAgICAgIF9sb29wKGkpO1xuXHQgICAgfVxuXHRcblx0ICAgIGNvbnRleHRBcnJheS5wdXNoKHtcblx0ICAgICAgJyZuYnNwOyAmbmJzcDsgUmVzZXQgVmlldyc6IHtcblx0ICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkge1xuXHQgICAgICAgICAgc2VsZi5hbmFseXNlcigncmVzZXQnKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICBzdHlsZTogc3ViQ2F0U3R5bGVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgY29udGV4dE1lbnUuYXBwZW5kQXNMaXN0KGNvbnRleHRBcnJheSk7XG5cdFxuXHQgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcignQ29udGV4dEljb24nLCBmdW5jdGlvbiAocG9zeCwgcG9zeSwgcmFkKSB7XG5cdCAgICAgIHZhciB4ID0gcG9zeCxcblx0ICAgICAgICAgIHkgPSBwb3N5LFxuXHQgICAgICAgICAgciA9IHJhZCAqIDIsXG5cdCAgICAgICAgICBzcGFjZSA9IE1hdGgucm91bmQociAvIDQpLFxuXHQgICAgICAgICAgaGFsZldpZHRoID0gTWF0aC5yb3VuZChyIC8gMikgKiAwLjcsXG5cdCAgICAgICAgICBzdGFydFggPSB4IC0gaGFsZldpZHRoLFxuXHQgICAgICAgICAgZW5kWCA9IHggKyBoYWxmV2lkdGgsXG5cdCAgICAgICAgICBzdGFydFkgPSB5ICsgc3BhY2UsXG5cdCAgICAgICAgICBlbmRZID0geSAtIHNwYWNlO1xuXHQgICAgICByZXR1cm4gWydNJywgc3RhcnRYLCB5LCAnTCcsIGVuZFgsIHksICdNJywgc3RhcnRYLCBzdGFydFksICdMJywgZW5kWCwgc3RhcnRZLCAnTScsIHN0YXJ0WCwgZW5kWSwgJ0wnLCBlbmRYLCBlbmRZXTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdyb3VwLmFkZFN5bWJvbChjb250ZXh0TWVudSk7XG5cdCAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG5cdCAgICByZXR1cm4gdG9vbGJhcjtcblx0ICB9O1xuXHRcblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuZ2V0TG9naWNhbFNwYWNlID0gZnVuY3Rpb24gKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpIHtcblx0ICAgIGF2YWlsYWJsZVdpZHRoIC89IDI7XG5cdCAgICB2YXIgbG9naWNhbFNwYWNlLFxuXHQgICAgICAgIHdpZHRoID0gMCxcblx0ICAgICAgICBoZWlnaHQgPSAwLFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgbG47XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcblx0ICAgICAgbG9naWNhbFNwYWNlID0gdGhpcy50b29sYmFyc1tpXS5nZXRMb2dpY2FsU3BhY2UoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCk7XG5cdCAgICAgIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG5cdCAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuXHQgICAgICB0aGlzLnRvb2xiYXJzW2ldLndpZHRoID0gbG9naWNhbFNwYWNlLndpZHRoO1xuXHQgICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG5cdCAgICB9XG5cdCAgICBoZWlnaHQgKz0gdGhpcy5wYWRkaW5nO1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgd2lkdGg6IHdpZHRoID4gYXZhaWxhYmxlV2lkdGggPyAwIDogd2lkdGgsXG5cdCAgICAgIGhlaWdodDogaGVpZ2h0ID4gYXZhaWxhYmxlSGVpZ2h0ID8gMCA6IGhlaWdodFxuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUucGxhY2VJbkNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICBfc2VsZi5wYWRkaW5nID0gNTtcblx0ICAgIF9zZWxmLnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuXHQgICAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKCkge1xuXHQgICAgICAgIHJldHVybiAnVG9vbEJveEV4dCc7XG5cdCAgICAgIH0sXG5cdCAgICAgIHJlZjogZnVuY3Rpb24gcmVmKG9iaikge1xuXHQgICAgICAgIHJldHVybiBvYmpbJzAnXTtcblx0ICAgICAgfSxcblx0ICAgICAgc2VsZjogZnVuY3Rpb24gc2VsZigpIHtcblx0ICAgICAgICByZXR1cm4gX3NlbGY7XG5cdCAgICAgIH0sXG5cdCAgICAgIHByaW9yaXR5OiBmdW5jdGlvbiBwcmlvcml0eSgpIHtcblx0ICAgICAgICByZXR1cm4gMjtcblx0ICAgICAgfSxcblx0ICAgICAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG5cdCAgICAgIH0sXG5cdCAgICAgIG9yaWVudGF0aW9uOiBbe1xuXHQgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICByZXR1cm4gb2JqLmhvcml6b250YWw7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBwb3NpdGlvbjogW3tcblx0ICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGFsaWdubWVudDogW3tcblx0ICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZShvYmopIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gb2JqLnJpZ2h0O1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBkaW1lbnNpb25zOiBbZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIF9zZWxmLmdldExvZ2ljYWxTcGFjZShwYXJlbnQuZ2V0V2lkdGgoKSwgcGFyZW50LmdldEhlaWdodCgpKTtcblx0ICAgICAgICAgICAgfV1cblx0ICAgICAgICAgIH1dXG5cdCAgICAgICAgfV1cblx0ICAgICAgfV1cblx0ICAgIH1dKTtcblx0ICB9O1xuXHRcblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuc2V0RHJhd2luZ0NvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuXHQgICAgbWVzLnggPSB4O1xuXHQgICAgbWVzLnkgPSB5O1xuXHQgICAgbWVzLndpZHRoID0gd2lkdGg7XG5cdCAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcblx0ICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuXHQgICAgdmFyIG1lYXN1cmVtZW50ID0gdGhpcy5tZWFzdXJlbWVudCxcblx0ICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG5cdCAgICAgICAgbG4sXG5cdCAgICAgICAgaSxcblx0ICAgICAgICB0b29sYmFyO1xuXHQgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuXHQgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuXHQgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcblx0ICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuXHQgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuXHQgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuXHQgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcblx0ICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG5cdCAgICAgICAgdG9vbGJhci5kcmF3KHgsIHkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ0dyb3d0aEFuYWx5c2VyRXh0JywgR3Jvd3RoQW5hbHlzZXJFeHQpO1xuXHR9XSk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBHcm93dGhBbmFseXNlciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBHcm93dGhBbmFseXNlcihkYXRhKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR3Jvd3RoQW5hbHlzZXIpO1xuXHRcblx0ICAgIHRoaXMuZGF0YSA9IGRhdGEubWFwKGZ1bmN0aW9uIChhKSB7XG5cdCAgICAgIHJldHVybiBhLm1hcChmdW5jdGlvbiAoYikge1xuXHQgICAgICAgIHJldHVybiBiO1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgICAgdGhpcy5Gb3JtdWxhZSA9IEZvcm11bGFlO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEdyb3d0aEFuYWx5c2VyLCBbe1xuXHQgICAga2V5OiAnYW5hbHlzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gYW5hbHlzZShtb2RlKSB7XG5cdCAgICAgIHZhciBpID0gMCxcblx0ICAgICAgICAgIGlpID0gMCxcblx0ICAgICAgICAgIGogPSAwLFxuXHQgICAgICAgICAgamogPSAwLFxuXHQgICAgICAgICAgbnVtID0gMCxcblx0ICAgICAgICAgIGNoZWNrQXJyID0gW10sXG5cdCAgICAgICAgICBjaGVja051bSA9IDAsXG5cdCAgICAgICAgICBkYXRhQXIgPSB0aGlzLmRhdGEsXG5cdCAgICAgICAgICBuRGF0YUFyID0gW10sXG5cdCAgICAgICAgICB0ZW1wQXIgPSBbXSxcblx0ICAgICAgICAgIHRlbXAgPSAwLFxuXHQgICAgICAgICAgZmxvb3IgPSBNYXRoLmZsb29yLFxuXHQgICAgICAgICAgcm91bmQgPSBNYXRoLnJvdW5kO1xuXHQgICAgICBpZiAodHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnICYmIG1vZGUudG9Mb3dlckNhc2UoKSA9PT0gJ3Jlc2V0Jykge1xuXHQgICAgICAgIHJldHVybiBkYXRhQXIubWFwKGZ1bmN0aW9uIChhKSB7XG5cdCAgICAgICAgICByZXR1cm4gYS5tYXAoZnVuY3Rpb24gKGIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGI7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIGlmICghaXNOYU4obW9kZSkpIHtcblx0ICAgICAgICAvLyBIYW5kbGluZyBhIG51bWJlclxuXHQgICAgICAgIGNoZWNrTnVtID0gK21vZGU7XG5cdCAgICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuXHQgICAgICAgICAgdGVtcEFyID0gW107XG5cdCAgICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG5cdCAgICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcblx0ICAgICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBtb2RlID0gdGhpcy5Gb3JtdWxhZVttb2RlXTtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG5cdCAgICAgICAgICB0ZW1wQXIgPSBbXTtcblx0ICAgICAgICAgIGNoZWNrTnVtID0gbW9kZShkYXRhQXJbaV0pO1xuXHQgICAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuXHQgICAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG5cdCAgICAgICAgICAgIGlmIChjaGVja051bSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgIHRlbXAgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdGVtcCA9IDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0ZW1wQXIucHVzaCh0ZW1wKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5yZWxwb3NpdGlvbikpIHtcblx0ICAgICAgICBtb2RlID0gbW9kZS5yZWxwb3NpdGlvbjtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG5cdCAgICAgICAgICB0ZW1wQXIgPSBbXTtcblx0ICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcblx0ICAgICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuXHQgICAgICAgICAgICBpZiAoaiArIG1vZGUgPj0gMCAmJiBqICsgbW9kZSA8IGpqKSB7XG5cdCAgICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1baiArIG1vZGVdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGNoZWNrTnVtID0gbnVtO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucG9zaXRpb24pIHx8IHR5cGVvZiBtb2RlLnBvc2l0aW9uID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIG1vZGUgPSBtb2RlLnBvc2l0aW9uO1xuXHQgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcblx0ICAgICAgICAgIHRlbXBBciA9IFtdO1xuXHQgICAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuXHQgICAgICAgICAgICBudW0gPSBkYXRhQXJbaV1bal07XG5cdCAgICAgICAgICAgIGlmIChtb2RlID09PSAnbGFzdCcpIHtcblx0ICAgICAgICAgICAgICBjaGVja051bSA9IGRhdGFBcltpXVtqaiAtIDFdO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdtaWQnKSB7XG5cdCAgICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bamogLyAyXTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlID49IDAgJiYgbW9kZSA8IGpqKSB7XG5cdCAgICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bbW9kZV07XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgY2hlY2tOdW0gPSBudW07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5yZWxkYXRhc2V0cG9zaXRpb24pKSB7XG5cdCAgICAgICAgbW9kZSA9IG1vZGUucmVsZGF0YXNldHBvc2l0aW9uO1xuXHQgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcblx0ICAgICAgICAgIHRlbXBBciA9IFtdO1xuXHQgICAgICAgICAgaWYgKGkgKyBtb2RlID49IDAgJiYgaSArIG1vZGUgPCBpaSkge1xuXHQgICAgICAgICAgICBjaGVja0FyciA9IGRhdGFBcltpICsgbW9kZV07XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjaGVja0FyciA9IGRhdGFBcltpXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcblx0ICAgICAgICAgICAgY2hlY2tOdW0gPSBjaGVja0FycltqXTtcblx0ICAgICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuXHQgICAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gbnVtKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBmb3IgKGkgPSAwLCBpaSA9IG5EYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuXHQgICAgICAgIGZvciAoaiA9IDAsIGpqID0gbkRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG5cdCAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShuRGF0YUFyW2ldW2pdKSkge1xuXHQgICAgICAgICAgICBuRGF0YUFyW2ldW2pdID0gbnVsbDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHJvdW5kVG9Ud28gPSBmdW5jdGlvbiByb3VuZFRvVHdvKG51bSkge1xuXHQgICAgICAgIHJldHVybiArKE1hdGgucm91bmQobnVtICsgJ2UrMicpICsgJ2UtMicpO1xuXHQgICAgICB9O1xuXHQgICAgICAvLyBSb3VuZGluZyB2YWx1ZXNcblx0ICAgICAgZm9yIChpID0gMCwgaWkgPSBuRGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcblx0ICAgICAgICBmb3IgKGogPSAwLCBqaiA9IG5EYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuXHQgICAgICAgICAgbkRhdGFBcltpXVtqXSA9IHJvdW5kVG9Ud28obkRhdGFBcltpXVtqXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBuRGF0YUFyO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEdyb3d0aEFuYWx5c2VyO1xuXHR9KCk7XG5cdFxuXHR2YXIgRm9ybXVsYWUgPSB7XG5cdCAgTWluaW11bTogZnVuY3Rpb24gTWluaW11bShhcnIpIHtcblx0ICAgIHJldHVybiBhcnIucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgIHJldHVybiBhID4gYiA/IGIgOiBhO1xuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBNYXhpbXVtOiBmdW5jdGlvbiBNYXhpbXVtKGFycikge1xuXHQgICAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGEgPCBiID8gYiA6IGE7XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIE1lYW46IGZ1bmN0aW9uIE1lYW4oYXJyKSB7XG5cdCAgICByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gYSArIGI7XG5cdCAgICB9KSAvIGFyci5sZW5ndGg7XG5cdCAgfSxcblx0ICBNZWRpYW46IGZ1bmN0aW9uIE1lZGlhbihhcnIpIHtcblx0ICAgIHJldHVybiBhcnIubWFwKGZ1bmN0aW9uIChhKSB7XG5cdCAgICAgIHJldHVybiBhO1xuXHQgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gYSAtIGI7XG5cdCAgICB9KVthcnIubGVuZ3RoIC8gMl07XG5cdCAgfSxcblx0ICAnU3RhbmRhcmQgRGV2aWF0aW9uJzogZnVuY3Rpb24gU3RhbmRhcmREZXZpYXRpb24odmFsdWVzKSB7XG5cdCAgICBmdW5jdGlvbiBhdmVyYWdlKGRhdGEpIHtcblx0ICAgICAgdmFyIHN1bSwgYXZnO1xuXHQgICAgICBzdW0gPSBkYXRhLnJlZHVjZShmdW5jdGlvbiAoc3VtLCB2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiBzdW0gKyB2YWx1ZTtcblx0ICAgICAgfSwgMCk7XG5cdFxuXHQgICAgICBhdmcgPSBzdW0gLyBkYXRhLmxlbmd0aDtcblx0ICAgICAgcmV0dXJuIGF2Zztcblx0ICAgIH1cblx0ICAgIHZhciBhdmcgPSAwLFxuXHQgICAgICAgIHNxdWFyZURpZmZzID0gMCxcblx0ICAgICAgICBzcXJEaWZmID0gMCxcblx0ICAgICAgICBhdmdTcXVhcmVEaWZmID0gMCxcblx0ICAgICAgICBzdGREZXYgPSAwLFxuXHQgICAgICAgIGRpZmYgPSAwO1xuXHQgICAgYXZnID0gYXZlcmFnZSh2YWx1ZXMpO1xuXHQgICAgc3F1YXJlRGlmZnMgPSB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICBkaWZmID0gdmFsdWUgLSBhdmc7XG5cdCAgICAgIHNxckRpZmYgPSBkaWZmICogZGlmZjtcblx0ICAgICAgcmV0dXJuIHNxckRpZmY7XG5cdCAgICB9KTtcblx0ICAgIGF2Z1NxdWFyZURpZmYgPSBhdmVyYWdlKHNxdWFyZURpZmZzKTtcblx0ICAgIHN0ZERldiA9IE1hdGguc3FydChhdmdTcXVhcmVEaWZmKTtcblx0ICAgIHJldHVybiBzdGREZXY7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBHcm93dGhBbmFseXNlcjtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGdyb3d0aC1hbmFseXNlci1lczUubWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNDYxZTBkMmQzMTA5MWExMjQ3OTgiLCJjb25zdCBHcm93dGhBbmFseXNlciA9IHJlcXVpcmUoJy4vZ3Jvd3RoYW5hbHlzZXInKTtcblxuRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3ByaXZhdGUnLCAnZ3Jvd3RoLWFuYWx5c2VyLWV4dCcsIGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gR3Jvd3RoQW5hbHlzZXJFeHQgKCkge1xuICAgIHRoaXMudG9vbGJveCA9IEZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG4gICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcbiAgICB0aGlzLkNvbXBvbmVudEdyb3VwID0gdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwO1xuICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG4gICAgd2luZG93LmEgPSB0aGlzO1xuICB9XG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdyb3d0aEFuYWx5c2VyRXh0O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5yZW5kZXJDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNoYXJ0SW5zdGFuY2UgPSB0aGlzLnRzT2JqZWN0LmNoYXJ0SW5zdGFuY2UsXG4gICAgICBjb21wb25lbnRTdG9yZSA9IGNoYXJ0SW5zdGFuY2UuYXBpSW5zdGFuY2UuZ2V0Q29tcG9uZW50U3RvcmUoKSxcbiAgICAgIGkgPSAwO1xuICAgIGZvciAoaSA9IDA7IGNvbXBvbmVudFN0b3JlLmdldENhbnZhc0J5SW5kZXgoaSk7ICsraSkge1xuICAgICAgY29tcG9uZW50U3RvcmUuZ2V0Q2FudmFzQnlJbmRleChpKS5nZXRDb21wb3NpdGlvbigpLlBsb3RNYW5hZ2VyLnBsb3QoKTtcbiAgICB9XG4gIH07XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmFuYWx5c2VyID0gZnVuY3Rpb24gKG1vZGUpIHtcbiAgICB2YXIgZ2EgPSB0aGlzLmdhIHx8IHt9LFxuICAgICAgc3RvcmUgPSB0aGlzLnRzT2JqZWN0LmFwaUluc3RhbmNlLmdldENvbXBvbmVudFN0b3JlKCksXG4gICAgICBjYW52YXMgPSBzdG9yZS5nZXRDYW52YXNCeUluZGV4KDApLFxuICAgICAgbmF2ID0gc3RvcmUuZ2V0TmF2aWdhdG9yQnlJbmRleCgwKSxcbiAgICAgIGNvbXAgPSBjYW52YXMuZ2V0Q29tcG9zaXRpb24oKSxcbiAgICAgIGRzID0gZ2EuZHMgfHwgY29tcC5kYXRhc2V0LFxuICAgICAgaSxcbiAgICAgIGlkTWFwID0gZ2EuaWRNYXAgfHwge30sXG4gICAgICBzdG9yZUFyID0gZ2Euc3RvcmVBciB8fCBbXSxcbiAgICAgIG5TdG9yZUFyciA9IFtdLFxuICAgICAgeUF4aXMgPSBjYW52YXMuY29tcG9zaXRpb24ueUF4aXM7XG4gICAgLy8gQ2hhbmdpbmcgeSBBeGlzIGZvcm1hdHRvclxuICAgIGlmIChtb2RlID09PSAncmVzZXQnKSB7XG4gICAgICB5QXhpcy5nZXRTY2FsZU9iaigpLmdldEludGVydmFsT2JqKCkuZ2V0Q29uZmlnKCdpbnRlcnZhbHMnKS5tYWpvci5mb3JtYXR0ZXIgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB5QXhpcy5nZXRTY2FsZU9iaigpLmdldEludGVydmFsT2JqKCkuZ2V0Q29uZmlnKCdpbnRlcnZhbHMnKS5tYWpvci5mb3JtYXR0ZXIgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWwgKyAnJSc7XG4gICAgICB9O1xuICAgIH1cbiAgICAvLyBEZWNsYXJhdGlvbiBlbmRzXG4gICAgdGhpcy5nYSA9IGdhO1xuICAgIGlmICghZ2Euc3RvcmVBcikge1xuICAgICAgc3RvcmUgPSB7fTtcbiAgICAgIGlmICghZ2EuaWRNYXApIHtcbiAgICAgICAgZHMuZm9yRWFjaFNlcmllcyhmdW5jdGlvbiAoYSwgYiwgYywgc2VyaWVzKSB7XG4gICAgICAgICAgc3RvcmVbc2VyaWVzLmdldElkKCldID0gc2VyaWVzLmdldE9yaWdpbmFsRGF0YSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChpIGluIHN0b3JlKSB7XG4gICAgICAgICAgc3RvcmVBci5wdXNoKHN0b3JlW2ldKTtcbiAgICAgICAgICBpZE1hcFtpXSA9IHN0b3JlQXIubGVuZ3RoIC0gMTtcbiAgICAgICAgICAvLyA9IHN0b3JlW2ldLm1hcChmdW5jdGlvbiAoZSkgeyByZXR1cm4gMjAgKiBlICsgKE1hdGgucmFuZG9tKCkgKiAxMDAwKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2EuaWRNYXAgPSBpZE1hcDtcbiAgICAgICAgZ2EuZHMgPSBkcztcbiAgICAgICAgZ2Euc3RvcmVBciA9IHN0b3JlQXI7XG4gICAgICAgIGdhLmdBbmFseXNlciA9IG5ldyBHcm93dGhBbmFseXNlcihzdG9yZUFyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgblN0b3JlQXJyID0gZ2EuZ0FuYWx5c2VyLmFuYWx5c2UobW9kZSk7XG4gICAgZHMuc2V0RGF0YUJ5U2VyaWVzKGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgIGlmIChuU3RvcmVBcnIubGVuZ3RoKSB7XG4gICAgICAgIHNlcmllcy5zZXRPcmlnaW5hbERhdGEoblN0b3JlQXJyW2lkTWFwW3Nlcmllcy5nZXRJZCgpXV0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbXAuaW1wbC51cGRhdGUoKTtcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChyZXF1aXJlKSB7XG4gICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICByZXF1aXJlKFtcbiAgICAgICd4QXhpcycsXG4gICAgICAneUF4aXMnLFxuICAgICAgJ2dyYXBoaWNzJyxcbiAgICAgICdjaGFydCcsXG4gICAgICAnZGF0YXNldCcsXG4gICAgICAnUGxvdE1hbmFnZXInLFxuICAgICAgJ2NhbnZhc0NvbmZpZycsXG4gICAgICAnTWFya2VyTWFuYWdlcicsXG4gICAgICAncmVhY3RpdmVNb2RlbCcsXG4gICAgICAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsXG4gICAgICAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLFxuICAgICAgJ3NtYXJ0TGFiZWwnLFxuICAgICAgJ2NoYXJ0SW5zdGFuY2UnLFxuICAgICAgJ2NhbnZhc0RhdGEnLFxuICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgeEF4aXMsXG4gICAgICAgICAgICB5QXhpcyxcbiAgICAgICAgICAgIGdyYXBoaWNzLFxuICAgICAgICAgICAgY2hhcnQsXG4gICAgICAgICAgICBkYXRhc2V0LFxuICAgICAgICAgICAgcGxvdE1hbmFnZXIsXG4gICAgICAgICAgICBjYW52YXNDb25maWcsXG4gICAgICAgICAgICBtYXJrZXJNYW5hZ2VyLFxuICAgICAgICAgICAgcmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgIGdsb2JhbFJlYWN0aXZlTW9kZWwsXG4gICAgICAgICAgICBzcGFjZU1hbmFnZXJJbnN0YW5jZSxcbiAgICAgICAgICAgIHNtYXJ0TGFiZWwsXG4gICAgICAgICAgICBjaGFydEluc3RhbmNlLFxuICAgICAgICAgICAgY2FudmFzRGF0YSkge1xuICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuICAgICAgICBpbnN0YW5jZS55QXhpcyA9IHlBeGlzO1xuICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuICAgICAgICBpbnN0YW5jZS5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcbiAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG4gICAgICAgIGluc3RhbmNlLmNhbnZhc0NvbmZpZyA9IGNhbnZhc0NvbmZpZztcbiAgICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG4gICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgICBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IHNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcbiAgICAgICAgaW5zdGFuY2UuY2hhcnRJbnN0YW5jZSA9IGNoYXJ0SW5zdGFuY2U7XG4gICAgICAgIGluc3RhbmNlLmNhbnZhc0RhdGEgPSBjYW52YXNEYXRhO1xuICAgICAgfVxuICAgIF0pO1xuICAgIHRoaXMuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBpbnN0YW5jZS5zcGFjZU1hbmFnZXJJbnN0YW5jZTtcbiAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgIHRoaXMudHNPYmplY3QgPSBpbnN0YW5jZS5jaGFydEluc3RhbmNlO1xuICAgIHRoaXMuc3RhcnREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5lbmREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLXN0YXJ0J107XG4gICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgIHRoaXMudG9vbGJhcnMgPSBbXTtcbiAgICB0aGlzLm1lYXN1cmVtZW50ID0ge307XG4gICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUuY3JlYXRlVG9vbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdG9vbGJhcixcbiAgICAgIGdyb3VwLFxuICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICBjb250ZXh0TWVudSxcbiAgICAgIGNvbnRleHRBcnJheSA9IFtdLFxuICAgICAgZ2FPcHRpb25zT2JqID0ge30sXG4gICAgICBwb3B1cCxcbiAgICAgIHBhcGVyID0gdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgIGNoYXJ0Q29udGFpbmVyID0gdGhpcy5ncmFwaGljcy5jb250YWluZXIsXG4gICAgICBzdWJDYXRTdHlsZSA9IHtcbiAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMnB4JyxcbiAgICAgICAgJ2NvbG9yJzogJyM2OTY5NjknLFxuICAgICAgICAnZm9udC1mYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIFNhbnMtc2VyaWYnXG4gICAgICB9LFxuICAgICAgY2F0U3R5bGUgPSB7XG4gICAgICAgICdmb250LXNpemUnOiAnMTNweCcsXG4gICAgICAgICdjb2xvcic6ICcjNjk2OTY5JyxcbiAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBTYW5zLXNlcmlmJyxcbiAgICAgICAgJ2ZvbnRXZWlnaHQnOiAnYm9sZCdcbiAgICAgIH07XG5cbiAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0pO1xuXG4gICAgdG9vbGJhci5zZXRDb25maWcoe1xuICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgfSk7XG5cbiAgICBncm91cCA9IG5ldyB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXAoe1xuICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgIH0pO1xuXG4gICAgZ3JvdXAuc2V0Q29uZmlnKHtcbiAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgIH0pO1xuXG4gICAgZ2FPcHRpb25zT2JqID0ge1xuICAgICAgJ0ZpcnN0IEluZGV4Jzoge3Bvc2l0aW9uOiAwfSxcbiAgICAgICdQcmV2aW91cyBJbmRleCc6IHtyZWxwb3NpdGlvbjogLTF9LFxuICAgICAgJ1NwZWNpZmljIFZhbHVlJzoge1xuICAgICAgICAnc3VibWVudSc6IHRydWUsXG4gICAgICAgICdNaW5pbXVtJzogJ01pbmltdW0nLFxuICAgICAgICAnTWF4aW11bSc6ICdNYXhpbXVtJyxcbiAgICAgICAgJ01lYW4nOiAnTWVhbicsXG4gICAgICAgICdNZWRpYW4nOiAnTWVkaWFuJyxcbiAgICAgICAgJ1N0YW5kYXJkIERldmlhdGlvbic6ICdTdGFuZGFyZCBEZXZpYXRpb24nLFxuICAgICAgICAnQ3VzdG9tIFZhbHVlLi4uJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHBvcHVwKCh2YWwpID0+IHNlbGYuYW5hbHlzZXIodmFsKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29udGV4dE1lbnUgPSBuZXcgdGhpcy50b29sYm94LlN5bWJvbFdpdGhDb250ZXh0KCdDb250ZXh0SWNvbicsIHtcbiAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICB9LCB7XG4gICAgICB3aWR0aDogMjQsXG4gICAgICBoZWlnaHQ6IDI0LFxuICAgICAgcG9zaXRpb246ICdyaWdodCcsXG4gICAgICBzdHJva2U6ICcjZjFmMWYxJyxcbiAgICAgIHN0cm9rZVdpZHRoOiAnMScsXG4gICAgICByYWRpdXM6ICcxJyxcbiAgICAgIHN5bWJvbFN0cm9rZTogJyNiZGJkYmQnLFxuICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6ICcyJ1xuICAgIH0pO1xuXG4gICAgY29udGV4dEFycmF5LnB1c2goe1xuICAgICAgJ0dyb3d0aCBBbmFseXNlcic6IHtcbiAgICAgICAgc3R5bGU6IGNhdFN0eWxlXG4gICAgICB9XG4gICAgfSk7XG4gICAgcG9wdXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBib3gsXG4gICAgICAgIGhlYWRlcixcbiAgICAgICAgc3R5bGUgPSB7XG4gICAgICAgICAgZm9udFNpemU6IDEwICsgJ3B4JyxcbiAgICAgICAgICBsaW5lSGVpZ2h0OiAxNSArICdweCcsXG4gICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBTYW5zLXNlcmlmJyxcbiAgICAgICAgICBzdHJva2U6ICcjNjc2NzY3JyxcbiAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogJzInXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRlcldpZHRoID0gMTgwLFxuICAgICAgICBoZWFkZXJUZXh0LFxuICAgICAgICBjcm9zcyxcbiAgICAgICAgaW5wdXRGaWVsZCxcbiAgICAgICAgYXBwbHlCdXR0b24sXG4gICAgICAgIHggPSAoc2VsZi5jaGFydC53aWR0aCAqIDAuNDcpIC0gOTAsXG4gICAgICAgIHkgPSBzZWxmLmNoYXJ0LmhlaWdodCAvIDIgLSA0MDtcblxuICAgICAgYm94ID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICBmaWxsOiAnI2Y3ZjdmNycsXG4gICAgICAgIHg6IHgsXG4gICAgICAgIHk6IHksXG4gICAgICAgIHdpZHRoOiAxODAsXG4gICAgICAgIGhlaWdodDogODBcbiAgICAgIH0sIHN0eWxlLCBjaGFydENvbnRhaW5lcik7XG5cbiAgICAgIGhlYWRlciA9IHBhcGVyLmh0bWwoJ2RpdicsIHtcbiAgICAgICAgZmlsbDogJyNlOGU4ZTgnLFxuICAgICAgICB3aWR0aDogaGVhZGVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogMjBcbiAgICAgIH0sIHN0eWxlLCBib3gpO1xuXG4gICAgICBoZWFkZXJUZXh0ID0gcGFwZXIuaHRtbCgnZGl2Jywge1xuICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICB3aWR0aDogaGVhZGVyV2lkdGggKiAwLjYsXG4gICAgICAgIGhlaWdodDogMjAsXG4gICAgICAgIHg6IDEwLFxuICAgICAgICB5OiAyXG4gICAgICB9LCBzdHlsZSwgaGVhZGVyKTtcblxuICAgICAgaGVhZGVyVGV4dC5hdHRyKHtcbiAgICAgICAgdGV4dDogJ1Byb3ZpZGUgdmFsdWUnXG4gICAgICB9KTtcblxuICAgICAgY3Jvc3MgPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgIHdpZHRoOiAxMCxcbiAgICAgICAgaGVpZ2h0OiAxMCxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgIGZsb2F0OiAncmlnaHQnLFxuICAgICAgICB0ZXh0OiAnWCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG4gICAgICB9LCBzdHlsZSwgaGVhZGVyKTtcblxuICAgICAgY3Jvc3Mub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBib3guaGlkZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGlucHV0RmllbGQgPSBwYXBlci5odG1sKCdpbnB1dCcsIHtcbiAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgICAgeDogMTAsXG4gICAgICAgIHk6IDMwXG4gICAgICB9LCBzdHlsZSwgYm94KTtcblxuICAgICAgYXBwbHlCdXR0b24gPSBwYXBlci5odG1sKCdkaXYnLCB7XG4gICAgICAgIHdpZHRoOiA1MCxcbiAgICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgICAgeDogMTIwLFxuICAgICAgICB5OiAzMCxcbiAgICAgICAgZmlsbDogJyM1NTU1NTUnXG4gICAgICB9LCB7XG4gICAgICAgIGZvbnRTaXplOiAxMCArICdweCcsXG4gICAgICAgIGxpbmVIZWlnaHQ6IDE1ICsgJ3B4JyxcbiAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBTYW5zLXNlcmlmJyxcbiAgICAgICAgZmlsbDogJyNlYWVhZWEnLFxuICAgICAgICBjb2xvcjogJyNlYWVhZWEnLFxuICAgICAgICBzdHJva2U6ICcjZWFlYWVhJyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgIH0sIGJveCk7XG5cbiAgICAgIGFwcGx5QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYm94LmhpZGUoKTtcbiAgICAgICAgY2FsbGJhY2soaW5wdXRGaWVsZC52YWwoKSk7XG4gICAgICB9KTtcbiAgICAgIGFwcGx5QnV0dG9uLmF0dHIoe1xuICAgICAgICB0ZXh0OiAnQXBwbHknXG4gICAgICB9KTtcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5mb2N1cygpO1xuICAgICAgZnVuY3Rpb24gaW5wdXRGaWVsZE51bWJlckhhbmRsZXIgKCkge1xuICAgICAgICBpbnB1dEZpZWxkLmVsZW1lbnQudmFsdWUgPSBpbnB1dEZpZWxkLmVsZW1lbnQudmFsdWUucmVwbGFjZSgvW15cXGQuLV0vZywgJycpO1xuICAgICAgfVxuICAgICAgaW5wdXRGaWVsZC5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaW5wdXRGaWVsZE51bWJlckhhbmRsZXIpO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsncG9zaXRpb24nXSA9ICdyZWxhdGl2ZSc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydiYWNrZ3JvdW5kQ29sb3InXSA9ICcjZDJkMmQyJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ2JvcmRlciddID0gJzJweCBzb2xpZCAjY2JjYmNiJztcbiAgICAgIGNyb3NzLmVsZW1lbnQuc3R5bGVbJ3BhZGRpbmcnXSA9ICcwcHggMHB4IDMuNXB4IDJweCc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydjb2xvciddID0gJyM4YzhjOGMnO1xuICAgICAgY3Jvc3MuZWxlbWVudC5zdHlsZVsnbWFyZ2luJ10gPSAnMXB4IDJweCc7XG4gICAgICBjcm9zcy5lbGVtZW50LnN0eWxlWydmbG9hdCddID0gJ3JpZ2h0JztcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnOHB4JztcbiAgICAgIGlucHV0RmllbGQuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMnB4IHNvbGlkICNkYWRiZGEnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnbWFyZ2luVG9wJ10gPSAnOHB4JztcbiAgICAgIGJveC5lbGVtZW50LnN0eWxlWydib3JkZXInXSA9ICcxcHggc29saWQgI2Q0ZDJkMyc7XG4gICAgICBoZWFkZXIuZWxlbWVudC5zdHlsZVsnYm9yZGVyJ10gPSAnMXB4IHNvbGlkICNkNGQyZDMnO1xuICAgICAgaGVhZGVyLmVsZW1lbnQuc3R5bGVbJ3dpZHRoJ10gPSAnMTc5cHgnO1xuICAgICAgaGVhZGVyVGV4dC5lbGVtZW50LnN0eWxlWydmb250U2l6ZSddID0gJzExLjVweCc7XG4gICAgICBoZWFkZXJUZXh0LmVsZW1lbnQuc3R5bGVbJ21hcmdpblRvcCddID0gJzAuNXB4JztcbiAgICAgIGhlYWRlclRleHQuZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjNjc2NzY3JztcbiAgICAgIGhlYWRlci5lbGVtZW50LnN0eWxlWydmb250LWZhbWlseSddID0gJ1wiTHVjaWRhIEdyYW5kZVwiLCBTYW5zLXNlcmlmJztcbiAgICAgIGFwcGx5QnV0dG9uLmVsZW1lbnQuc3R5bGVbJ3RleHRBbGlnbiddID0gJ2NlbnRlcic7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydmb250U2l6ZSddID0gJzExcHgnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsncGFkZGluZ1RvcCddID0gJzNweCc7XG4gICAgICBhcHBseUJ1dHRvbi5lbGVtZW50LnN0eWxlWydib3JkZXJSYWRpdXMnXSA9ICczcHgnO1xuICAgICAgYXBwbHlCdXR0b24uZWxlbWVudC5zdHlsZVsnY29sb3InXSA9ICcjZTRlNGU0JztcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgaSBpbiBnYU9wdGlvbnNPYmopIHtcbiAgICAgIGxldCBrZXksXG4gICAgICAgIG9iaiA9IHt9LFxuICAgICAgICBzdWJPYmogPSB7fTtcbiAgICAgIGlmICghZ2FPcHRpb25zT2JqW2ldLnN1Ym1lbnUpIHtcbiAgICAgICAga2V5ID0gJyZuYnNwOyAmbmJzcDsgJyArIGk7XG4gICAgICAgIG9ialtrZXldID0ge307XG4gICAgICAgIG9ialtrZXldID0ge1xuICAgICAgICAgIHN0eWxlOiBzdWJDYXRTdHlsZSxcbiAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmFuYWx5c2VyKGdhT3B0aW9uc09ialtpXSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtleSA9ICcmIzk2NjYmbmJzcDsgJyArIGk7XG4gICAgICAgIG9ialtrZXldID0ge307XG4gICAgICAgIG9ialtrZXldLmFjdGlvbiA9ICdjbGljayc7XG4gICAgICAgIG9ialtrZXldLnN0eWxlID0gc3ViQ2F0U3R5bGU7XG4gICAgICAgIG9ialtrZXldLmhhbmRsZXIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiBpbiBnYU9wdGlvbnNPYmpbaV0pIHtcbiAgICAgICAgICBsZXQgc3ViTWVudU5hbWUgPSBqLFxuICAgICAgICAgICAgc3ViTWVudVZhbHVlID0gZ2FPcHRpb25zT2JqW2ldW2pdO1xuICAgICAgICAgIGlmIChqID09PSAnc3VibWVudScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJPYmogPSB7fTtcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0gPSB7fTtcbiAgICAgICAgICBzdWJPYmpbJyZuYnNwOycgKyBzdWJNZW51TmFtZV0uaGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3ViTWVudVZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHN1Yk1lbnVWYWx1ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZi5hbmFseXNlcihzdWJNZW51VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLmFjdGlvbiA9ICdjbGljayc7XG4gICAgICAgICAgc3ViT2JqWycmbmJzcDsnICsgc3ViTWVudU5hbWVdLnN0eWxlID0gc3ViQ2F0U3R5bGU7XG4gICAgICAgICAgb2JqW2tleV0uaGFuZGxlci5wdXNoKHN1Yk9iaik7XG4gICAgICAgICAgaWYgKGogIT09IGdhT3B0aW9uc09ialtpXS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBvYmpba2V5XS5oYW5kbGVyLnB1c2goe1xuICAgICAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZDVkMmQyJyxcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogJzFweCcsXG4gICAgICAgICAgICAgICAgICBtYXJnaW46ICcxcHgnLFxuICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzBweCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGV4dEFycmF5LnB1c2gob2JqKTtcbiAgICAgIGNvbnRleHRBcnJheS5wdXNoKHtcbiAgICAgICAgJyc6IHtcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2Q1ZDJkMicsXG4gICAgICAgICAgICBoZWlnaHQ6ICcxcHgnLFxuICAgICAgICAgICAgbWFyZ2luOiAnMXB4JyxcbiAgICAgICAgICAgIHBhZGRpbmc6ICcwcHgnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb250ZXh0QXJyYXkucHVzaCh7XG4gICAgICAnJm5ic3A7ICZuYnNwOyBSZXNldCBWaWV3Jzoge1xuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5hbmFseXNlcigncmVzZXQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWN0aW9uOiAnY2xpY2snLFxuICAgICAgICBzdHlsZTogc3ViQ2F0U3R5bGVcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnRleHRNZW51LmFwcGVuZEFzTGlzdChjb250ZXh0QXJyYXkpO1xuXG4gICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcignQ29udGV4dEljb24nLCBmdW5jdGlvbiAocG9zeCwgcG9zeSwgcmFkKSB7XG4gICAgICB2YXIgeCA9IHBvc3gsXG4gICAgICAgIHkgPSBwb3N5LFxuICAgICAgICByID0gcmFkICogMixcbiAgICAgICAgc3BhY2UgPSBNYXRoLnJvdW5kKHIgLyA0KSxcbiAgICAgICAgaGFsZldpZHRoID0gTWF0aC5yb3VuZChyIC8gMikgKiAwLjcsXG4gICAgICAgIHN0YXJ0WCA9ICh4IC0gaGFsZldpZHRoKSxcbiAgICAgICAgZW5kWCA9ICh4ICsgaGFsZldpZHRoKSxcbiAgICAgICAgc3RhcnRZID0gKHkgKyBzcGFjZSksXG4gICAgICAgIGVuZFkgPSAoeSAtIHNwYWNlKTtcbiAgICAgIHJldHVybiBbJ00nLCBzdGFydFgsIHksICdMJywgZW5kWCwgeSwgJ00nLCBzdGFydFgsIHN0YXJ0WSwgJ0wnLCBlbmRYLCBzdGFydFksICdNJywgc3RhcnRYLCBlbmRZLCAnTCcsIGVuZFgsIGVuZFldO1xuICAgIH0pO1xuXG4gICAgZ3JvdXAuYWRkU3ltYm9sKGNvbnRleHRNZW51KTtcbiAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG4gICAgcmV0dXJuIHRvb2xiYXI7XG4gIH07XG5cbiAgR3Jvd3RoQW5hbHlzZXJFeHQucHJvdG90eXBlLmdldExvZ2ljYWxTcGFjZSA9IGZ1bmN0aW9uIChhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KSB7XG4gICAgYXZhaWxhYmxlV2lkdGggLz0gMjtcbiAgICB2YXIgbG9naWNhbFNwYWNlLFxuICAgICAgd2lkdGggPSAwLFxuICAgICAgaGVpZ2h0ID0gMCxcbiAgICAgIGksXG4gICAgICBsbjtcblxuICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcbiAgICAgIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG4gICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG4gICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgfVxuICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiB3aWR0aCA+IGF2YWlsYWJsZVdpZHRoID8gMCA6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQgPiBhdmFpbGFibGVIZWlnaHQgPyAwIDogaGVpZ2h0XG4gICAgfTtcbiAgfTtcblxuICBHcm93dGhBbmFseXNlckV4dC5wcm90b3R5cGUucGxhY2VJbkNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWRkaW5nID0gNTtcbiAgICBzZWxmLnNwYWNlTWFuYWdlckluc3RhbmNlLmFkZChbe1xuICAgICAgbmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ1Rvb2xCb3hFeHQnO1xuICAgICAgfSxcbiAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqWycwJ107XG4gICAgICB9LFxuICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH0sXG4gICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gMjtcbiAgICAgIH0sXG4gICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG4gICAgICB9LFxuICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmhvcml6b250YWw7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uOiBbe1xuICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxpZ25tZW50OiBbe1xuICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICByZXR1cm4gb2JqLnJpZ2h0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG4gICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldExvZ2ljYWxTcGFjZShwYXJlbnQuZ2V0V2lkdGgoKSwgcGFyZW50LmdldEhlaWdodCgpKTtcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfV1cbiAgICAgICAgfV1cbiAgICAgIH1dXG4gICAgfV0pO1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5zZXREcmF3aW5nQ29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuICAgIG1lcy54ID0geDtcbiAgICBtZXMueSA9IHk7XG4gICAgbWVzLndpZHRoID0gd2lkdGg7XG4gICAgbWVzLmhlaWdodCA9IGhlaWdodDtcblxuICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdyb3d0aEFuYWx5c2VyRXh0LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgdmFyIG1lYXN1cmVtZW50ID0gdGhpcy5tZWFzdXJlbWVudCxcbiAgICAgIHRvb2xiYXJzID0gdGhpcy50b29sYmFycyxcbiAgICAgIGxuLFxuICAgICAgaSxcbiAgICAgIHRvb2xiYXI7XG4gICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcbiAgICB3aWR0aCA9IHdpZHRoID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC53aWR0aCA6IHdpZHRoO1xuICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcbiAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG4gICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuICAgICAgICB0b29sYmFyLmRyYXcoeCwgeSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIEZ1c2lvbkNoYXJ0cy5yZWdpc3RlckNvbXBvbmVudCgnZXh0ZW5zaW9ucycsICdHcm93dGhBbmFseXNlckV4dCcsIEdyb3d0aEFuYWx5c2VyRXh0KTtcbn1dKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9leHRlbnNpb24uanMiLCIndXNlIHN0cmljdCc7XG5jbGFzcyBHcm93dGhBbmFseXNlciB7XG4gIGNvbnN0cnVjdG9yIChkYXRhKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YS5tYXAoKGEpID0+IHtcbiAgICAgIHJldHVybiBhLm1hcCgoYikgPT4geyByZXR1cm4gYjsgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5Gb3JtdWxhZSA9IEZvcm11bGFlO1xuICB9XG4gIGFuYWx5c2UgKG1vZGUpIHtcbiAgICBsZXQgaSA9IDAsXG4gICAgICBpaSA9IDAsXG4gICAgICBqID0gMCxcbiAgICAgIGpqID0gMCxcbiAgICAgIG51bSA9IDAsXG4gICAgICBjaGVja0FyciA9IFtdLFxuICAgICAgY2hlY2tOdW0gPSAwLFxuICAgICAgZGF0YUFyID0gdGhpcy5kYXRhLFxuICAgICAgbkRhdGFBciA9IFtdLFxuICAgICAgdGVtcEFyID0gW10sXG4gICAgICB0ZW1wID0gMCxcbiAgICAgIGZsb29yID0gTWF0aC5mbG9vcixcbiAgICAgIHJvdW5kID0gTWF0aC5yb3VuZDtcbiAgICBpZiAodHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnICYmIG1vZGUudG9Mb3dlckNhc2UoKSA9PT0gJ3Jlc2V0Jykge1xuICAgICAgcmV0dXJuIGRhdGFBci5tYXAoKGEpID0+IHtcbiAgICAgICAgcmV0dXJuIGEubWFwKChiKSA9PiB7IHJldHVybiBiOyB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUpKSB7IC8vIEhhbmRsaW5nIGEgbnVtYmVyXG4gICAgICBjaGVja051bSA9ICttb2RlO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcbiAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW0pO1xuICAgICAgICB9XG4gICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBtb2RlID0gdGhpcy5Gb3JtdWxhZVttb2RlXTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGVtcEFyID0gW107XG4gICAgICAgIGNoZWNrTnVtID0gbW9kZShkYXRhQXJbaV0pO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIGlmIChjaGVja051bSA9PT0gMCkge1xuICAgICAgICAgICAgdGVtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGVtcCA9IDEwMCAqIChudW0gLSBjaGVja051bSkgLyBjaGVja051bTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGVtcEFyLnB1c2godGVtcCk7XG4gICAgICAgIH1cbiAgICAgICAgbkRhdGFBci5wdXNoKHRlbXBBcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghaXNOYU4obW9kZS5yZWxwb3NpdGlvbikpIHtcbiAgICAgIG1vZGUgPSBtb2RlLnJlbHBvc2l0aW9uO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBkYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0ZW1wQXIgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIG51bSA9IGRhdGFBcltpXVtqXTtcbiAgICAgICAgICBpZiAoaiArIG1vZGUgPj0gMCAmJiBqICsgbW9kZSA8IGpqKSB7XG4gICAgICAgICAgICBjaGVja051bSA9IGRhdGFBcltpXVtqICsgbW9kZV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gbnVtO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZW1wQXIucHVzaCgxMDAgKiAobnVtIC0gY2hlY2tOdW0pIC8gY2hlY2tOdW0pO1xuICAgICAgICB9XG4gICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWlzTmFOKG1vZGUucG9zaXRpb24pIHx8IHR5cGVvZiBtb2RlLnBvc2l0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgbW9kZSA9IG1vZGUucG9zaXRpb247XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGRhdGFBci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRlbXBBciA9IFtdO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIGlmIChtb2RlID09PSAnbGFzdCcpIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gZGF0YUFyW2ldW2pqIC0gMV07XG4gICAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAnbWlkJykge1xuICAgICAgICAgICAgY2hlY2tOdW0gPSBkYXRhQXJbaV1bamogLyAyXTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPj0gMCAmJiBtb2RlIDwgamopIHtcbiAgICAgICAgICAgIGNoZWNrTnVtID0gZGF0YUFyW2ldW21vZGVdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja051bSA9IG51bTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGVtcEFyLnB1c2goMTAwICogKG51bSAtIGNoZWNrTnVtKSAvIGNoZWNrTnVtKTtcbiAgICAgICAgfVxuICAgICAgICBuRGF0YUFyLnB1c2godGVtcEFyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpc05hTihtb2RlLnJlbGRhdGFzZXRwb3NpdGlvbikpIHtcbiAgICAgIG1vZGUgPSBtb2RlLnJlbGRhdGFzZXRwb3NpdGlvbjtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGVtcEFyID0gW107XG4gICAgICAgIGlmIChpICsgbW9kZSA+PSAwICYmIGkgKyBtb2RlIDwgaWkpIHtcbiAgICAgICAgICBjaGVja0FyciA9IGRhdGFBcltpICsgbW9kZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tBcnIgPSBkYXRhQXJbaV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChqID0gMCwgamogPSBkYXRhQXJbaV0ubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIGNoZWNrTnVtID0gY2hlY2tBcnJbal07XG4gICAgICAgICAgbnVtID0gZGF0YUFyW2ldW2pdO1xuICAgICAgICAgIHRlbXBBci5wdXNoKDEwMCAqIChudW0gLSBjaGVja051bSkgLyBudW0pO1xuICAgICAgICB9XG4gICAgICAgIG5EYXRhQXIucHVzaCh0ZW1wQXIpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGkgPSAwLCBpaSA9IG5EYXRhQXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgZm9yIChqID0gMCwgamogPSBuRGF0YUFyW2ldLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobkRhdGFBcltpXVtqXSkpIHtcbiAgICAgICAgICBuRGF0YUFyW2ldW2pdID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgcm91bmRUb1R3byA9IChudW0pID0+IHtcbiAgICAgIHJldHVybiArKE1hdGgucm91bmQobnVtICsgJ2UrMicpICsgJ2UtMicpO1xuICAgIH07XG4gICAgLy8gUm91bmRpbmcgdmFsdWVzXG4gICAgZm9yIChpID0gMCwgaWkgPSBuRGF0YUFyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGZvciAoaiA9IDAsIGpqID0gbkRhdGFBcltpXS5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIG5EYXRhQXJbaV1bal0gPSByb3VuZFRvVHdvKG5EYXRhQXJbaV1bal0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbkRhdGFBcjtcbiAgfVxufVxuXG52YXIgRm9ybXVsYWUgPSB7XG4gIE1pbmltdW06IChhcnIpID0+IHtcbiAgICByZXR1cm4gYXJyLnJlZHVjZSgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEgPiBiID8gYiA6IGE7XG4gICAgfSk7XG4gIH0sXG4gIE1heGltdW06IChhcnIpID0+IHtcbiAgICByZXR1cm4gYXJyLnJlZHVjZSgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEgPCBiID8gYiA6IGE7XG4gICAgfSk7XG4gIH0sXG4gIE1lYW46IChhcnIpID0+IHtcbiAgICByZXR1cm4gYXJyLnJlZHVjZSgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEgKyBiO1xuICAgIH0pIC8gYXJyLmxlbmd0aDtcbiAgfSxcbiAgTWVkaWFuOiAoYXJyKSA9PiB7XG4gICAgcmV0dXJuIGFyci5tYXAoKGEpID0+IGEpLnNvcnQoKGEsIGIpID0+IHsgcmV0dXJuIGEgLSBiOyB9KVthcnIubGVuZ3RoIC8gMl07XG4gIH0sXG4gICdTdGFuZGFyZCBEZXZpYXRpb24nOiAodmFsdWVzKSA9PiB7XG4gICAgZnVuY3Rpb24gYXZlcmFnZSAoZGF0YSkge1xuICAgICAgdmFyIHN1bSwgYXZnO1xuICAgICAgc3VtID0gZGF0YS5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHN1bSArIHZhbHVlO1xuICAgICAgfSwgMCk7XG5cbiAgICAgIGF2ZyA9IHN1bSAvIGRhdGEubGVuZ3RoO1xuICAgICAgcmV0dXJuIGF2ZztcbiAgICB9XG4gICAgdmFyIGF2ZyA9IDAsXG4gICAgICBzcXVhcmVEaWZmcyA9IDAsXG4gICAgICBzcXJEaWZmID0gMCxcbiAgICAgIGF2Z1NxdWFyZURpZmYgPSAwLFxuICAgICAgc3RkRGV2ID0gMCxcbiAgICAgIGRpZmYgPSAwO1xuICAgIGF2ZyA9IGF2ZXJhZ2UodmFsdWVzKTtcbiAgICBzcXVhcmVEaWZmcyA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBkaWZmID0gdmFsdWUgLSBhdmc7XG4gICAgICBzcXJEaWZmID0gZGlmZiAqIGRpZmY7XG4gICAgICByZXR1cm4gc3FyRGlmZjtcbiAgICB9KTtcbiAgICBhdmdTcXVhcmVEaWZmID0gYXZlcmFnZShzcXVhcmVEaWZmcyk7XG4gICAgc3RkRGV2ID0gTWF0aC5zcXJ0KGF2Z1NxdWFyZURpZmYpO1xuICAgIHJldHVybiBzdGREZXY7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gR3Jvd3RoQW5hbHlzZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZ3Jvd3RoYW5hbHlzZXIuanMiXSwic291cmNlUm9vdCI6IiJ9