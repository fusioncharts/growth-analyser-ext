!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1);FusionCharts.register("extension",["private","growth-analyser",function(){var t=function(){function t(){i(this,t);var e=this;this.toolbox=FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.analyserOptionsObject={"First Data":{position:0},"Previous Data":{relposition:-1},"Specific Value":{submenu:!0,Minimum:"Minimum",Maximum:"Maximum",Average:"Mean",Median:"Median","Standard Deviation":"Standard Deviation","Custom Value...":function(t){t(function(t){e.currentValue=t+"",e.analyser(t),e.preGrowthHook("Custom")})}}}}return o(t,[{key:"analyser",value:function(t){var e,n=this,i=this.ga||{},r=this.tsObject.apiInstance.getComponentStore(),o=r.getCanvasByIndex(0),s=o.getComposition(),l=i.ds||s.dataset,c=i.idMap||{},d=i.storeAr||[],u=[],h=o.composition.yAxis;if(this.ga=i,!i.storeAr&&(r={},!i.idMap)){l.forEachSeries(function(t,e,n,i){r[i.getId()]=i.getOriginalData()});for(e in r)d.push(r[e]),c[e]=d.length-1;i.idMap=c,i.ds=l,i.storeAr=d,i.gAnalyser=new a(d)}u=i.gAnalyser.analyse(t),"reset"!==t&&u.changed?(h.getScaleObj().getIntervalObj().getConfig("intervals").major.formatter=function(t,e){return e.numberFormatter.yAxis(t)+"%"},n.contextMenu&&n.contextMenu.showListItem("reset")):(h.getScaleObj().getIntervalObj().getConfig("intervals").major.formatter=function(t,e){return e.numberFormatter.yAxis(t)},n.contextMenu&&n.contextMenu.hideListItem("reset")),l.setDataBySeries(function(t){u.value.length&&t.setOriginalData(u.value[c[t.getId()]])}),s.impl.update()}},{key:"init",value:function(t){var e=this,n=["graphics","chart","globalReactiveModel","spaceManagerInstance","smartLabel","chartInstance","extData",function(){var t=0,i=n.length-1,r="";for(t=0;t<i;++t)r=n[t],e[r]=arguments[t]}];return t(n),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.tsObject=e.chartInstance,this.startDt=e.globalReactiveModel.model["x-axis-visible-range-start"],this.endDt=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this}},{key:"growthOverMode",value:function(){function t(e){var i,a;for(i in e)a=e[i],"object"===("undefined"==typeof a?"undefined":r(a))&&a.submenu&&t(a),i.indexOf(n)+1&&(o=!0)}var e=this,n=this.extData&&this.extData.growthOver,i=this.analyserOptionsObject,o=!1;return t(i),o?void(isNaN(n)?"firstIndex"===n?(e.preGrowthHook("First"),e.analyser({position:0})):"prevIndex"===n?(e.preGrowthHook("Previous"),e.analyser({relposition:-1})):(e.preGrowthHook(n),e.analyser(n)):(e.analyser(n),e.preGrowthHook("Custom"))):void(e.contextMenu&&e.contextMenu.hideListItem("reset"))}},{key:"updateAxisName",value:function(t){function e(n){for(u in n)h=n[u],"object"===("undefined"==typeof h?"undefined":r(h))&&h.submenu&&e(h),u.indexOf(t)+1&&(d=!0)}function n(t){a&&o.getAxisName("y",{text:t})}var i=this,o=this.chartInstance&&this.chartInstance.apiInstance,a=this.origAxisName||o.getAxisName("y"),s=this.extData&&this.extData.axisFormatter,l="function"==typeof s&&s||function(t,e){var n=e+"";return"Custom"===n&&(n=i.currentValue+""),n=n.toLowerCase(),t+="",t+" (Growth over "+n+")"},c=this.analyserOptionsObject,d=!1,u="",h=void 0;e(c),this.origAxisName=a,n(d?l(a,t):a)}},{key:"preGrowthHook",value:function(t){this.highlight(t),this.updateAxisName(t)}},{key:"highlight",value:function(t,e){for(var n=this.contextMenu,i=n&&n.dropDownMenu.containerData,r=i.length,o=this.graphics.paper,a=o.getInstances().d3,s={};r--;)s=i[r].container.container,s.selectAll("div").each(function(e){e.name&&e.name.indexOf(t)+1?a.select(this).classed("fc-dropdown-list-selected",!0):a.select(this).classed("fc-dropdown-list-selected",!1)})}},{key:"addCssRules",value:function(t,e){var n,i,r=this.graphics.paper;for(n in t)switch(i=t[n],n){case"container":e.container&&r.cssAddRule("."+i,e.container.style);break;case"text":e.text&&r.cssAddRule("."+i,e.text.style)}}},{key:"createToolbar",value:function(){function t(t,e,n,i){return{type:"path",attrs:{d:["M",t,e,"L",t+n,e,"M",t,e+i/2,"L",t+n,e+i/2,"M",t,e+i,"L",t+n,e+i].join(" "),stroke:"#696969","stroke-width":"2px"}}}var e,n,i,r,o,a,s,l,c,d,u=this,h=[],p={},f=this.graphics.paper,g=f.getInstances().d3,y=this.graphics.container,m=u.extData&&u.extData.style||{},b={"font-size":"12px",color:"#696969","font-family":'"Lucida Grande", Sans-serif'},v={"font-size":"12px",color:"#4b4b4b","font-family":'"Lucida Grande", Sans-serif'},x={"font-weight":"bold"},w={"font-size":"10px","line-height":"15px","font-family":'"Lucida Grande", Sans-serif',stroke:"#676767","stroke-width":"2"},k={"font-size":"13px","font-weight":"bold",color:"#4b4b4b","font-family":'"Lucida Grande", Sans-serif'},C={backgroundColor:"#d5d2d2"},M={height:22,radius:1,className:"standard-period-selector",container:{style:{fill:"#FFFFFF","stroke-width":"1px",stroke:"#CED5D4"}},symbol:{style:{fill:"#4b4b4b"}},states:{hover:{className:"standard-period-selector-state-hover",container:{style:{"stroke-width":"1px",stroke:"#6d6d6d",cursor:"pointer",fill:"#d7d7d7"}}}}},N={container:{style:{background:"#fff","border-color":"#898b8b","border-radius":"1px","border-style":"solid","border-width":"1px","font-size":"11px","font-family":'"Lucida Grande", sans-serif',"box-shadow":"rgb(153, 153, 153) 0px 0px 5px"}},listItem:{style:{},states:{hover:{className:"fc-dropdown-list-item-hover",style:{background:"#e7e8e8",color:"#696969",cursor:"pointer"}},selected:{className:"fc-dropdown-list-item-selected",style:{background:"#898b8b",color:"#fff"}}}}},L={"fc-dropdown-list-item-cat":v,"fc-dropdown-list-item-subcat":b,"fc-dropdown-list-divider":C,"fc-dropdown-list-header":k,"fc-dropdown-list-selected":x};for(o in L)f.cssAddRule("."+o,L[o]);m.category=m.category||{},m.subCategory=m.subCategory||{},m.popup=m.popup||{},Object.assign(v,m.category),Object.assign(b,m.subCategory),Object.assign(w,m.popup),e=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),e.setConfig({fill:"#fff",borderThickness:0}),n=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),n.setConfig({fill:"#fff",borderThickness:0}),p=this.analyserOptionsObject,i=g.buttonWithContextMenu(t,this.graphics.container).setConfig({width:24,height:22,position:"right",radius:"1",className:M.className,states:{hover:M.states.hover.className},padding:{top:6,bottom:6,left:6,right:6}}),u.addCssRules(i.getIndividualClassNames(i.getClassName()),M),u.addCssRules(i.getIndividualClassNames(i.config.states.hover),M.states.hover),a=i.config.dropDownMenu;for(l in a)switch(s=a[l],l){case"container":f.cssAddRule("."+s.className,N.container.style);break;case"listItem":f.cssAddRule("."+s.className,N.listItem.style),d=s.states;for(c in d)f.cssAddRule("."+d[c],N.listItem.states[c].style)}this.contextMenu=i,h.push({name:"Show Growth Over",interactivity:!1,className:"fc-dropdown-list-header"}),r=function(t){var e,n,i,r=document.createElement("div"),o=w,a=document.createElement("div"),s=document.createElement("button"),l=document.createElement("input"),c=document.createElement("div"),d=document.createElement("div"),h=document.createElement("button"),p=180,f=function(){r.parentElement.removeChild(r),i.remove()},m=function(){var e=l.value;f(),t(e)},b=u.chart&&u.chart.width||0,v=u.chart&&u.chart.height||0,x=b/2-90,k=v/2-40;n=g.select(y),i=n.select("svg").append("rect").attr("x",0).attr("y",0).attr("width",b).attr("height",v).attr("fill","#000").attr("opacity","0.35"),y.appendChild(r),r.unselectable="on",r.style.position="absolute",r.style.fill="#f7f7f7",r.style.left=x+"px",r.style.top=k+"px",r.style.border="1px solid rgb(212, 210, 211)",r.style.stroke="rgb(103, 103, 103)",r.style.width=p+"px",r.style.backgroundColor="rgb(247, 247, 247)",r.style.height="80px",r.style.fontFamily='"Lucida Grande", sans-serif';for(e in o)r.style[e]=o[e];h.innerHTML="X",h.style.paddingTop="-3px",h.type="button",h.style.float="right",h.style.display="inline",h.style.marginTop="-3px",h.style.cursor="pointer",h.style.height="21px",h.style.lineHeight="1",h.style.width="24px",h.style.border="2px solid rgb(203, 203, 203)",h.style.backgroundColor="rgb(210, 210, 210)",h.style.color="rgb(140, 140, 140)",h.style.stroke="rgb(103, 103, 103)",h.addEventListener("click",f),d.innerHTML="Provide Value",d.style.fontSize="10px",d.style.display="inline-block",d.style.stroke="rgb(103, 103, 103)",d.style.width=p-50+"px",d.style.color="rgb(103, 103, 103)",c.style.position="relative",c.style.paddingTop="3px",c.style.paddingLeft="11px",c.style.left="0px",c.style.top="0px",c.style.backgroundColor="rgb(232, 232, 232)",c.style.border="1px solid rgb(212, 210, 211)",c.style.stroke="rgb(103, 103, 103)",c.style.width=p-12+"px",c.style.height="18px";for(e in o)c.style[e]=o[e];l.style.width="54%",l.style.height="17px",l.style.border="2px solid rgb(218, 219, 218)",l.style.stroke="rgb(103, 103, 103)",l.addEventListener("keyup",function(t){13===t.keyCode?m():l.value=l.value.replace(/[^\d.-]/g,"")}),l.addEventListener("keydown",function(t){l.value=l.value.replace(/[^\d.-]/g,"")}),s.style.float="right",s.style.borderRadius="1px",s.style.color="#fff",s.style.background="#555555",s.style.fontSize="10px",s.style.borderRadius="5px",s.style.border="1px solid rgba(0,0,0,0.4)",s.style.height="22px",s.style.width="50px",s.style.cursor="pointer",s.addEventListener("click",m),s.innerHTML="Apply",a.style.textAlign="center",a.style.paddingTop="18px",a.style.paddingRight="10px",c.appendChild(d),c.appendChild(h),a.appendChild(l),a.appendChild(s),r.appendChild(c),r.appendChild(a),l.focus()},h.push({name:"Reset View",id:"reset",className:"fc-dropdown-list-item-cat",padding:{left:20},handler:function(){u.analyser("reset"),u.preGrowthHook("reset")},action:"click"}),h.push({id:"reset",divider:!0,interactivity:!1,className:"fc-dropdown-list-divider"});var I=function(t){var e=void 0,n={},i={};if(p[t].submenu){n={},e=t,n.name=e,n.action="click",n.className="fc-dropdown-list-item-cat",n.handler=[],n.padding={left:20};var o=function(e){var o=e,a=p[t][e];return"submenu"===e?"continue":(i={},i.className="fc-dropdown-list-item-subcat",i.parentListName=t,i.name=o,i.handler=function(){"function"==typeof a?a(r):(u.analyser(a),u.preGrowthHook(o))},i.action="click",i.style=b,n.handler.push(i),void(e.indexOf("Custom")===-1&&n.handler.push({divider:!0,interactivity:!1,className:"fc-dropdown-list-divider"})))};for(var a in p[t]){o(a)}}else e=t,n={name:e,className:"fc-dropdown-list-item-cat",padding:{left:20},handler:function(){u.analyser(p[t]),u.preGrowthHook(t)},action:"click"};h.push(n),t.indexOf("Specific")===-1&&h.push({divider:!0,className:"fc-dropdown-list-divider"})};for(var O in p)I(O);return i.add(h),n.addSymbol(i),e.addComponent(n),this.growthOverMode(),e}},{key:"getLogicalSpace",value:function(t,e){t/=2;var n,i,r,o=0,a=0;for(i=0,r=this.toolbars.length;i<r;i++)n=this.toolbars[i].getLogicalSpace(t,e),o=Math.max(n.width,o),a+=n.height,this.toolbars[i].width=n.width,this.toolbars[i].height=n.height;return a+=this.padding,{width:o>t?0:o,height:a>e?0:a}}},{key:"placeInCanvas",value:function(){var t=this,e=this.extData||{},n=e.posWrtCanvas||"top",i=e.layout||"inline",r=e.alignment||"right",o=e.orientation||"horizontal";t.padding=5,t.spaceManagerInstance.add([{name:function(){return"ToolBoxExt"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t[i]},orientation:[{type:function(t){return t[o]},position:[{type:function(t){return t[n]},alignment:[{type:function(t){return t[r]},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,n,i,r){var o=this.measurement;return o.x=t,o.y=e,o.width=n,o.height=i,this.parentGroup=r,this}},{key:"draw",value:function(t,e,n,i,r){var o,a,s,l=this.measurement,c=this.toolbars;if(t=void 0===t?l.x:t,e=void 0===e?l.y:e,n=void 0===n?l.width:n,i=void 0===i?l.height:i,r=void 0===r?this.parentGroup:r,n&&i)for(a=0,o=c.length;a<o;a++)s=c[a],s.draw(t,e,r)}}]),t}();FusionCharts.registerComponent("extensions","growth-analyser",t)}])},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)};var r=function(){function t(e){n(this,t),this.data=e.map(function(t){return t.map(function(t){return t})}),this.Formulae=o}return i(t,[{key:"getAnalyser",value:function(t){return this.analyse.bind(this,t)}},{key:"analyse",value:function(t,e){var n=0,i=0,r=0,o=0,a=0,s=this.Formulae,l=e||this.data,c=[],d=0,u=l,h=[],p=[],f=0,g=({changed:!1,value:l.map(function(t){return t.map(function(t){})})},{changed:!1,value:l.map(function(t){return t.map(function(t){return t})})});if(void 0===t)return g;if("string"==typeof t&&"reset"===t.toLowerCase())return g;if(isNaN(t))if("string"==typeof t){if(t=s[t],!t)return g;for(n=0,i=u.length;n<i;++n){for(p=[],d=t(u[n]),r=0,o=u[n].length;r<o;++r)a=u[n][r],f=0===d?void 0:100*(a-d)/d,p.push(f);h.push(p)}}else if(isNaN(t.relposition))if(isNaN(t.position)&&"string"!=typeof t.position){if(isNaN(t.reldatasetposition))return g;for(t=t.reldatasetposition,n=0,i=u.length;n<i;++n){for(p=[],c=n+t>=0&&n+t<i?u[n+t]:u[n],r=0,o=u[n].length;r<o;++r)d=c[r],a=u[n][r],p.push(100*(a-d)/a);h.push(p)}}else for(t=t.position,n=0,i=u.length;n<i;++n){for(p=[],r=0,o=u[n].length;r<o;++r)a=u[n][r],d="last"===t?u[n][o-1]:"mid"===t?u[n][o/2]:t>=0&&t<o?u[n][t]:a,p.push(100*(a-d)/d);h.push(p)}else for(t=t.relposition,n=0,i=u.length;n<i;++n){for(p=[],r=0,o=u[n].length;r<o;++r)a=u[n][r],d=r+t>=0&&r+t<o?u[n][r+t]:a,p.push(100*(a-d)/d);h.push(p)}else for(d=+t,n=0,i=u.length;n<i;++n){for(p=[],r=0,o=u[n].length;r<o;++r)a=u[n][r],p.push(100*(a-d)/d);h.push(p)}for(n=0,i=h.length;n<i;++n)for(r=0,o=h[n].length;r<o;++r)Number.isFinite(h[n][r])||(h[n][r]=null),f=parseInt(100*h[n][r]),h[n][r]=f/100;return{changed:!0,value:h}}}]),t}(),o={Minimum:function(t){return t.reduce(function(t,e){return t>e?e:t})},Maximum:function(t){return t.reduce(function(t,e){return t<e?e:t})},Mean:function(t){return t.reduce(function(t,e){return t+e})/t.length},Median:function(t){return t.map(function(t){return t}).sort(function(t,e){return t-e})[t.length>>1]},"Standard Deviation":function(t){function e(t){var e,n;return e=t.reduce(function(t,e){return t+e},0),n=e/t.length}var n=0,i=0,r=0,o=0,a=0,s=0;return n=e(t),i=t.map(function(t){return s=t-n,r=s*s}),o=e(i),a=Math.sqrt(o)}};t.exports=r}]);